% -----------------------------------------  
% AUTOGENERATED LATEX FILE FROM XML DOCBOOK  
%    customized by wh@haefelinger.it         
% -----------------------------------------  
%%<params>
%%</params>
\documentclass{article}
\usepackage{flaka}
%
% Define title and author
%
\newcommand{\dbktitle}{The Flaka Manual}
\newcommand{\dbkauthors}{author wh@haefelinger.it}
%
% Let's rock!
%
\begin{document}

\section{Introduction}
\label{introduction}\hyperlabel{introduction}%

Writing a project's build script is serious business. And so it is when using Ant. Ant does not provide you with any abstraction how the project needs to be build. There is no underlying logic. In fact all what Ant provides are a lot of small work units, calls tasks, that need to be glued together to implement the desired logic. Ant is therefore quite similar to writing a Shell script where you can utilize all those fine masterpieces like \texttt{c\-p}, \texttt{m\-k\-d\-i\-r} and \texttt{f\-i\-n\-d}. However, Ant lacks any decent control structures. There is no \texttt{i\-f\--{}\-t\-h\-e\-n\--{}\-e\-l\-s\-e} and there is no \texttt{w\-h\-i\-l\-e} \footnote{
\texttt{i\-f} and \texttt{w\-h\-i\-l\-e} can be implemented in terms of calling targets depending on whether a property exists or not. Rather awkward ..
}. What's more, you have to use a rather unfriendly, sometimes even hostile, \href{http://en.wikipedia.org/wiki/XML}{XML} syntax. On the bright side however, consider this Ant snippet:

\begin{lstlisting}[firstnumber=1,]
<copy todir="${destdir}">
 <fileset dir="${srcdir}">
   <include name="*.jar" />
 </fileset>
</copy>\end{lstlisting}

It's its expressiveness which makes me list this example on the bright side as it is easy to grasp what will happen: files ending in \texttt{.\-j\-a\-r} are copied from one folder into another folder. Now assume that you have to include some further logic in that snippet above:
\begin{itemize}

\item{} \emph{if a certain folder exists, copy files matching \texttt{*\-.\-z\-i\-p}, otherwise stick with \texttt{*\-.\-j\-a\-r}.} 

\end{itemize}

When staying with Ant, you define a property and use it like

\begin{lstlisting}[firstnumber=1,]
<include name="${jar_or_zip}"/>\end{lstlisting}

The problem is that you have to define that property elsewhere thus you start to miss part of the logic. This is where I believe that Ant has a true deficit and this is where Flaka kicks in. Flaka provides, amongst other things, with an expression language (EL). Thus you could write

\begin{lstlisting}[firstnumber=1,]
<include name=" *.#{ mydir.exists ? 'zip' : 'jar'} " />\end{lstlisting}

However, even having such a powerful extension like EL I am missing the full power of a programming language's control structures. Yes, I want to have conditionals, repetitive constructs and a decent exception handling. Furthermore, I want to have variables which I can set or remove for pleasure. I don't want to be restricted that such variables may carry strings only. Any data object must be allowed. In summary, this is what Flaka currently is all about:
\begin{itemize}

\item{} Expression Language



\item{} Well known control structures


\end{itemize}

This pillars are Flakas approach to simplify the process of writing a build script with Ant. You are by no means forced to use all or any of those pillars. You can for example just use the control structure tasks with or without making use of EL or vice versa.

\subsection{Where to go from here?}
\label{_where_to_go_from_here}\hyperlabel{_where_to_go_from_here}%
\begin{itemize}

\item{} \href{http://code.google.com/p/flaka/downloads/list}{Download} Flaka and read the \hyperlink{installation}{installation page}.



\item{} Make sure to consult chapter \hyperlink{el}{EL}. It contains a lot of information on this enormous useful extension.



\item{} Have a closer look in the reference part of this manual for all the gory details.



\item{} Start writing build scripts using Flaka and give \href{mailto:flaka@haefelinger.it}{feedback}.


\end{itemize}

\subsection{Conventions}
\label{_conventions}\hyperlabel{_conventions}%

Ant build file examples show a mix of tasks provided by Flaka and by Ant. Ant task do not require a namespace while those provided by Flaka do. Flaka's namespace is

\begin{lstlisting}[firstnumber=1,]
antlib:it.haefelinger.flaka\end{lstlisting}

and within this manual, the abbreviation \texttt{c} will be used for this namespace. Therefore it becomes easy to see who is the provider of a task:

\begin{lstlisting}[firstnumber=1,]
<echo> Ant </echo>
<c:echo> Flaka </c:echo>\end{lstlisting}

Thus all build file snippets shown assume that the build file contains the following XML namespace declaration:

\begin{lstlisting}[firstnumber=1,]
<project xmlns:c="antlib:it.haefelinger.flaka" ..>
  <!-- build script example -->
</project>\end{lstlisting}

\section{Installation}
\label{part1}\hyperlabel{part1}%

\label{installation}\hyperlabel{installation}%
Download \footnote{
see either \href{http://download.haefelinger.it/flaka}{http://download.haefelinger.it/\-flaka} or use \href{http://code.google.com/p/flaka/downloads}{http://code.google.com/\-p/\-flaka/\-downloads}
} latest version of Flaka and \emph{drop} \texttt{a\-n\-t\--{}\-f\-l\-a\-k\-a\-.\-x\-.\-y\-.\-z\-.\-j\-a\-r} into your local Ant installation. All that needs to be done is to put this jar into Java's classpath when running Ant. There are various techniques how to do so. Please read-{}on what exactly needs to be done.

\subsection{Ready, ..}
\label{_ready}\hyperlabel{_ready}%

The following \textbf{requirements} must be satisfied before you start:
\begin{itemize}

\item{} Flaka requires \href{http://java.sun.com/javase/downloads/index.jsp}{Java 1.5} or newer. You can change the version by setting environment variable \texttt{J\-A\-V\-A\-\_\-H\-O\-M\-E}. Have also a look into \href{http://ant.apache.org/manual/index.html}{the manual provided by Ant} for other environment variables to utilize.



\item{} \href{http://ant.apache.org}{Ant} version 1.7.0 or newer.


\end{itemize}

\subsection{Charge, ..}
\label{_charge}\hyperlabel{_charge}%

The most primitive technique is to save \texttt{a\-n\-t\--{}\-f\-l\-a\-k\-a\--{}\-x\-.\-y\-.\-z\-.\-j\-a\-r} into Ant's library folder \texttt{l\-i\-b}. If you have no clue where Ant is installed, try

\begin{lstlisting}[firstnumber=1,]
 $ ant -diagnostics | grep ant.home
 ant.home: /opt/ant/1.7.1\end{lstlisting}

Saving something in Ant's library folder may not work if you lack required permissions. There is also the disadvantage that when switching to another installation of Ant, you need to reinstall Flaka again. Therefore consider to use option \texttt{-{}\-l\-i\-b}:

\begin{lstlisting}[firstnumber=1,]
 $ ant -lib ant-flaka-x.y.z.jar\end{lstlisting}

A pretty nice feature of option \texttt{-{}\-l\-i\-b} is, that if the argument is a folder, that folder is scanned for \texttt{j\-a\-r} files. Therefore you may want to do something like this:

\begin{lstlisting}[firstnumber=1,]
 $ mkdir $HOME/lib/ant
 $ cp ant-flaka-x.y.z.jar $HOME/lib/ant
 $ ant -lib $HOME/lib/ant\end{lstlisting}

This approach has the nice advantage that you simply can drop other jar files into folder \texttt{\$\-H\-O\-M\-E\-/\-l\-i\-b\-/\-a\-n\-t} to make them reachable  without touching the original Ant installation. As already mentioned, this will get handy when you have multiple Ant installations. Notice that option \texttt{-{}\-l\-i\-b} can be applied more than once if your jars reside in various folders. Finally notice, that folders are \emph{not} recursively scanned.

When working from the command line, it is rather annoying to provide option \texttt{-{}\-l\-i\-b} for each and every call. Fortunately, Ant recognizes environment variable \texttt{A\-N\-T\-\_\-A\-R\-G\-S} which can be used to let \texttt{-{}\-l\-i\-b} disappear:

\begin{lstlisting}[firstnumber=1,]
 $ ANT_ARGS="-lib $HOME/lib/ant"
 $ export ANT_ARGS\end{lstlisting}

The drawback with this technique is that you need to make sure that this variable is set in every environment you start up Ant. This sounds perhaps easier than actually done. Luckily again, Ant reads file \texttt{\$\-H\-O\-M\-E\-/\-.\-a\-n\-t\-r\-c} and \texttt{\$\-H\-O\-M\-E\-/\-.\-a\-n\-t\-/\-a\-n\-t\-.\-c\-o\-n\-f} on each and every start-{}up. It is therefore recommended to set variable \texttt{A\-N\-T\-\_\-A\-R\-G\-S} in one of this files \footnote{
when doing so, you donâ€™t need to \emph{export} that variable
}to make just every plain call to \texttt{a\-n\-t} is aware of Flaka. For example:

\begin{lstlisting}[firstnumber=1,]
 $ cat $HOME/.antrc
 ANT_ARGS="-lib $HOME/lib/ant"\end{lstlisting}

Finally it should be mentioned, that Ant scans for additional jars in folder \texttt{\$\-H\-O\-M\-E\-/\-.\-a\-n\-t\-/\-l\-i\-b}. Thus the following two invocations of Ant are identical

\begin{lstlisting}[firstnumber=1,]
 $ ant
 $ ant -lib $HOME/.ant/lib\end{lstlisting}

\subsection{Fire!}
\label{_fire}\hyperlabel{_fire}%

To check whether your setup is proper, create a small build script and try to execute it. For example,try this

\begin{lstlisting}[firstnumber=1,]
$ cat > build.xml << EOF
<project xmlns:c="antlib:it.haefelinger.flaka">
 <c:logo>
  Hello, #{property['ant.file'].tofile.name}
 </c:logo>
</project>
^D\end{lstlisting}

Then, when created, try to execute it with your Flaka equipped Ant. You should
see something like

\begin{lstlisting}[firstnumber=1,]
$ ant
:::::::::::::::::::::::::::::::::::::::::::::::::::
::               Hello, build.xml                ::
:::::::::::::::::::::::::::::::::::::::::::::::::::
BUILD SUCCESSFUL
[..]\end{lstlisting}

if everything is well setup.

\section{EL}
\label{el}\hyperlabel{el}%

The \emph{Unified Expression Language} \footnote{
\href{http://en.wikipedia.org/wiki/Unified_Expression_Language}{http://en.wikipedia.org/\-wiki/\-Unified\_Expression\_Language}
}, further in this document abbreviated as \emph{EL}, is a special purpose programming language typically used for embedding expressions in web applications. While EL is part of the JSP Specification, it does not depend on JSP and can therefore be used in a variety of other contexts. One such context is Ant. Consider the following example \footnote{
To make this example work, one need to globally enable EL for all string contexts. By default, EL is \emph{not} globally enabled. To enable it globally, use Flaka's task \texttt{<{}\-c\-:\-i\-n\-s\-t\-a\-l\-l\--{}\-p\-r\-o\-p\-e\-r\-t\-y\--{}\-h\-a\-n\-d\-l\-e\-r\-/\->{}}
}:

\begin{lstlisting}[firstnumber=1,]
<echo>
  Modified #{ format('%tD', file(project).mtime) }
<echo>\end{lstlisting}

The EL expression here, a function call with two arguments, utilizes two standard of Flaka's standard functions, namely \texttt{f\-o\-r\-m\-a\-t\-(\-)} for creating a string and \texttt{f\-i\-l\-e\-(\-)} for turning something into a file object. Function \texttt{f\-o\-r\-m\-a\-t\-(\-)} accepts an arbitrary number of arguments. Two arguments are provided in this example. A string argument as the first argument while the second argument is the object returned by querying property \texttt{m\-t\-i\-m\-e} on the file object returned \texttt{f\-i\-l\-e\-(\-p\-r\-o\-j\-e\-c\-t\-)}.  Argument \texttt{p\-r\-o\-j\-e\-c\-t} is one of Flaka's implicit objects. In particular, \texttt{p\-r\-o\-j\-e\-c\-t} represents the current Ant project. The evaluation of \texttt{f\-i\-l\-e\-(\-p\-r\-o\-j\-e\-c\-t\-)} is the project's base directory as file object. Such a file object has various properties. One property is the file's last modification time available as property \texttt{m\-t\-i\-m\-e}. The whole EL expression is embedded in the textual context of Ant's standard \texttt{e\-c\-h\-o} task.  The embedment is done using \texttt{\#\-\{} and \texttt{\}} respectively. When executed, this snippet produces something like

\begin{lstlisting}[firstnumber=1,]
[echo] Modified 10/29/10\end{lstlisting}

Here are some further examples of EL expressions:

\begin{lstlisting}[firstnumber=1,]
7 * (5.0+x) >= 0             ; (1)
a and not (b || false)       ; (2)
empty L ? null : L[0]        ; (3)
list('a','b')                ; (4)
split('a,b',',')             ; (5)
project.name                 ; (6)
size(file('.').list)         ; (7)\end{lstlisting}

The first expression (1) shows a algebraic equation. Notice the usage of \texttt{5\-.\-0} being of type float, \texttt{7} being an integral type and furthermore \texttt{x} as variable. A Boolean expression is shown in the second example using operators \texttt{a\-n\-d}, \texttt{n\-o\-t} and operator \texttt{|\-|}. The same expression could also have been written like \texttt{a \&\-\& !\-(\-b o\-r f\-a\-l\-s\-e\-)}. Example (3) shows operator \texttt{e\-m\-p\-t\-y} and conditional operator \texttt{?\-:}. The expression could be read like: check whether a (list) object is empty. If empty, return \texttt{n\-u\-l\-l}, otherwise return the list's first item. The fourth and fifth expression shows two list generating functions -{} \texttt{l\-i\-s\-t\-(\-)} just collects all arguments into a list while \texttt{s\-p\-l\-i\-t\-(\-)} breaks a string apart based on a regular expression. The project's name is queried in example (6) while example (7), calculates the number of files and folders in the current working directory.

\subsection{EL References}
\label{el_enabling_el}\hyperlabel{el_enabling_el}%

It turned out that it is a good idea to have a clear distinction between properties and EL expressions. Therefore, an EL expression must be enclosed by \texttt{\#\-\{\-.\-.\-\}} rather than by \texttt{\$\-\{\-.\-.\-\}}. A enclosed EL expression is called an reference to a EL expression. Similarly is \texttt{\$\-\{\-.\-.\-\}} named a reference to a Ant property. Consider:

\begin{lstlisting}[firstnumber=1,]
<echo>
 ${3 * 4}   ; Property reference
 #{3 * 4}   ; EL expression reference
</echo>\end{lstlisting}

Ant is by default not aware of EL. Thus the EL reference \texttt{\#\-\{\-3 * 4\-\}} would not be evaluated and would be passed as is. To let Ant evaluate EL expression references, EL must be enabled \footnote{
see task \hyperlink{task_install_property_handler}{install-{}property-{}handler} for how to do this
}. Once enabled, EL references can be used wherever Ant property references can be used. Consider:

\begin{lstlisting}[firstnumber=1,]
<echo>
 #{3 * 4}   ; still #{3 * 4}
</echo>
<c:install-property-handler />
<property name="twelve" value="#{ 3 * 4 }" />
<echo>
 #{3 * 4}   ; 12
 ${twelve}  ; 12
</echo>\end{lstlisting}

\subsubsection{Enabling}
\label{_enabling}\hyperlabel{_enabling}%

To enable EL references in addition to Ant property references, Ant's standard property helper engine must be exchanged. This is best done using Flaka's  \hyperlink{task_install_property_handler}{install-{}property-{}handler} task. This task can be used everywhere. It is however recommended to (a) call it only once (b) to call it as early as possible.

Starting with version 1.8 Ant provides a task for switching property helpers. This task can also be used to change the characteristics how Ant property references are handled. To support this new property API, Flaka provides a second Antlib in addition to the standard one. Consider:

\begin{lstlisting}[firstnumber=1,]
<project xmlns:prop="antlib:it.haefelinger.flaka.prop">
 <propertyhelper>
    <prop:elreferences />
 </propertyhelper>
 <echo>
   #{ 3 * 4 }   ; 12
 </echo>
</project>\end{lstlisting}

For those who want to stay more in-{}line with Ant property references, Flaka ships with a property evaluator. When this evaluator is plugged in, \texttt{\$\-\{\-.\-.\-\}} will be evaluated as EL reference. Consider:

\begin{lstlisting}[firstnumber=1,]
<project xmlns:prop="antlib:it.haefelinger.flaka.prop">
 <propertyhelper>
    <prop:elevaluator />
 </propertyhelper>
 <echo>
   ${ 3 * 4 }   ; 12
 </echo>
</project>\end{lstlisting}

\subsubsection{Conversion}
\label{_conversion}\hyperlabel{_conversion}%

Ant properties are strings, thus Ant properties are used in string contexts and consequently the same applies for EL references. When an EL reference is seen, the EL expression is firstly evaluated into an object of some type \emph{T}. Then, in a second step, that object value is coerced \footnote{
implicitly type converted
} into a string value.

\subsubsection{Nested References}
\label{_nested_references}\hyperlabel{_nested_references}%

Nested references are \emph{not} supported. The following example, which tries to do some sort of meta-{}programming on implicit object \texttt{p\-r\-o\-j\-e\-c\-t}, is therefore illegal

\begin{lstlisting}[firstnumber=1,]
<c:echo>
     #{ project.#{ property } }   ; illegal
</c:echo>\end{lstlisting}

\subsubsection{Nested Properties}
\label{_nested_properties}\hyperlabel{_nested_properties}%

Ant property references \texttt{\$\-\{\-.\-.\-\}} are resolved before any EL reference is resolved. Consider:

\begin{lstlisting}[firstnumber=1,]
<property name="pname" value="basedir" />
<c:echo>
     #{ project.${pname} }        ; project.basedir
     ${ project.#{ 'basedir' }}   ; no way
</c:echo>\end{lstlisting}

\subsubsection{The Great Escape}
\label{_the_great_escape}\hyperlabel{_the_great_escape}%

How about to print a text sequence like \texttt{\#\-\{ 3 * 4\-\}}. In other words, how to disable evaluation of an EL reference? Consider:

\begin{lstlisting}[firstnumber=1,]
<c:echo>
     #{ 3 * 4 }        ; 12
    \#{ 3 * 4 }        ; #{ 3 * 4 }
  #{'{'}3 * 4 }        ; #{ 3 * 4 }
    ##{ 3 * 4 }        ; #12
    \#{                ; \#{
    $${twelve}         ; ${twelve}
    $$x                ; $x
</c:echo>\end{lstlisting}

Please notice that escaping a property reference is different than escaping a EL reference. By default, Ant stops evaluation of property references if the reference is prefixed with a dollar character. In addition, every double dollar sequence \texttt{\$\-\$} is reduced into a single dollar character.

Escaping in EL is different as the example above demonstrates. The preferred way is to prefix the EL reference with a backslash character \texttt{\textbackslash{}}.

\subsubsection{Whitespace}
\label{_whitespace}\hyperlabel{_whitespace}%

Trailing and leading whitespace is meaningless within EL references. This is different from Ant properties where whitespace is meaning full. Consider:

\begin{lstlisting}[firstnumber=1,]
<property name=" p " value="weired name ' p '" />
<property name="p" value="regular name 'p'" />
<c:echo>
     ${p}                 ; regular name 'p'
     ${ p }               ; weired name ' p '
     #{ p }               ; regular name 'p'
     #{ property[' p '] } ; weired name ' p '
</c:echo>\end{lstlisting}

\subsubsection{EL Awareness}
\label{_el_awareness}\hyperlabel{_el_awareness}%

Flaka is naturally EL aware. Regardless of whether EL has been enabled or not, all Flaka tasks understand EL references \texttt{\#\-\{\-.\-.\-\}} without any additional action.

In addition, attributes of tasks provided by Flaka can be \emph{typed}. A argument provided to a \emph{typed} attribute is expected to be an EL expression. Evaluating that expression will be done in the context of an expected \emph{type}. Consider attribute \texttt{t\-e\-s\-t} of Flaka's \hyperlink{task_when}{when} task:

\begin{lstlisting}[firstnumber=1,]
<c:when test=" file(path).isdir ">
  <!-- do something with that dir folder .. -->
</c:when>\end{lstlisting}

Attribute \texttt{t\-e\-s\-t} is typed and it's expected type is \texttt{b\-o\-o\-l\-e\-a\-n}. The argument must be a an EL expression, here \texttt{f\-i\-l\-e\-(\-p\-a\-t\-h\-)\-.\-i\-s\-d\-i\-r}. That EL expression will be evaluated into some object and then, in a second step coerced into a boolean value.

Notice that Ant and EL references can be used in typed attributes. After all, a typed attribute is a regular attribute as far as Ant is concerned. It is just Flaka who is evaluating the expression as EL. Thus consider this kind of meta-{}programming , that all attributes are handled by the currently installed property handler. Thus even for attribute \texttt{t\-e\-s\-t} the normal attribute rules apply. Consider this kind of meta-{}programming where by default an object is queried for property \texttt{i\-s\-d\-i\-r} subject to whether variable \texttt{p\-r\-o\-p} is empty or not. If not empty, then the value is queried for property \texttt{p\-r\-o\-p}:

\begin{lstlisting}[firstnumber=1,]
<c:when test=" obj.#{ empty prop ? 'isdir' : prop} ">
 ..
</c:when>\end{lstlisting}

The following sections will handle some advanced issues regarding EL references and especially their relation with Ant property references.

\subsection{Data Types}
\label{el_data_types}\hyperlabel{el_data_types}%

The following types can be used when writing EL expressions:
\begin{itemize}

\item{} \emph{null} to represent the absence of any data



\item{} \emph{integer} for integer values



\item{} \emph{float} for any floating point values



\item{} \emph{boolean} to express Boolean logic



\item{} \emph{string} to represent char sequences



\item{} \emph{list} for iterable types



\item{} \emph{map} for dictionary like types



\item{} \emph{file} representing file objects



\item{} \emph{project} representing Ant project instances



\item{} \emph{object} for all other data values


\end{itemize}

The question is how to get a element of those? EL defines literals denoting elements of type \texttt{n\-u\-l\-l}, \texttt{i\-n\-t\-e\-g\-e\-r}, \texttt{f\-l\-o\-a\-t}, \texttt{b\-o\-o\-l\-e\-a\-n}, and \texttt{s\-t\-r\-i\-n\-g}. Furthermore there are implicit objects and functions, see below.

\subsubsection{Null Literals}
\label{_null_literals}\hyperlabel{_null_literals}%

The \texttt{n\-u\-l\-l} type contains only one data element also called \texttt{n\-u\-l\-l}. From a semantic point of view it is used to represent the absence of any data. Within EL, \texttt{n\-u\-l\-l} has an interesting characteristic: it can be asked whether it has a certain property and the answer will always be \texttt{n\-u\-l\-l} again. Consider:

\begin{lstlisting}[firstnumber=1,]
null['any property']   ; null
null.mtime             ; null\end{lstlisting}

This rather different from other languages where asking \texttt{n\-u\-l\-l} for a property is asking for trouble, i.e. null pointer exception and the like. Notice also the following differences between operator \texttt{e\-m\-p\-t\-y} and function \texttt{n\-u\-l\-l\-p\-(\-)} when working with value \texttt{n\-u\-l\-l}:

\begin{lstlisting}[firstnumber=1,]
empty null     ; true
empty list()   ; true
empty ''       ; true
nullp(null)    ; true
nullp(list())  ; false
nullp('')      ; false\end{lstlisting}

\subsubsection{String Literals}
\label{_string_literals}\hyperlabel{_string_literals}%

A string literal starts and ends with the same quotation character. Quotation characters are either the single quote \texttt{'} or the double quote \texttt{"} character. If the quotation character is needed within the literal, then the escape character \texttt{\textbackslash{}} must be used. The escape character must also be used if the escape character itself is to be expressed in the literal. The escape character can't be used to escape other characters than the quotation character and the escape character.

\begin{lstlisting}[firstnumber=1,]
"abc"        ; abc
'abc'        ; abc
'abc"        ; illegal
"a'c"        ; a'c
'a"c'        ; a"c
'a\'c'       ; a'c
'a\"c'       ; a\"c
"a\"c"       ; a"c
'a\bc'       ; a\bc
'a\\bc'      ; a\bc
'ab\'        ; illegal
'ab\\'       ; ab\\end{lstlisting}

\subsubsection{Object  Literals}
\label{_object_literals}\hyperlabel{_object_literals}%

Well, EL has no notation for \emph{object} literals like literals for type integer and boolean. So, how to get an object in the first place? There are two possibilities:
\begin{itemize}

\item{} use an implicit object; and



\item{} use a function


\end{itemize}

Once you have an object, you can in addition
* use an object's property
to retrieve another object. When does a property exist and how to retrieve it? This and other questions are answered in section \hyperlink{el_properties}{EL Properties} while section \hyperlink{el_implicit_objects}{EL Implicit Object} lists available implicit objects and section \hyperlink{el_functions}{EL Functions} is about functions to be used.

Notice that EL does also not provide a notation for arrays or list objects nor is there a \texttt{l\-i\-s\-t} data type. Nevertheless, Flaka provides a \texttt{l\-i\-s\-t\-(\-)} function to create a collection of arbitrary objects. There is also task \texttt{f\-o\-r} able to iterate over collection types and there is function \texttt{s\-i\-z\-e\-(\-)} which returns the number of items in a collection. How does this work? EL uses a concept called \emph{duck typing} where a object's type is not given by a class but rather by it's properties: \emph{I call every object that walks, swims and quacks like a duck, a duck}. Thus properties are looked up during runtime and a object provides all required properties, the object is applied.

\subsection{Variables}
\label{el_variables}\hyperlabel{el_variables}%

The EL language does not allow you to create variables and must thus be created by other means \footnote{
See task \hyperlink{task_let}{let} for creating EL variables, properties and overriding properties
}. Nevertheless, variables can be used within expressions. When a \emph{name} is evaluated, then \emph{name} is looked up
\begin{itemize}

\item{} as implicit object; or



\item{} as entry in EL's variable dictionary; or



\item{} as Ant property name


\end{itemize}

in this particular order, consider:

\begin{lstlisting}[firstnumber=1,]
<property name="p" value="property" />
<property name="q" value="property" />
<c:let>
 q = 'variable'
</c:let>
<echo>
 ${p}           ; 'property'
 #{p}           ; 'property'
 ${q}           ; 'property'
 #{q}           ; 'variable'
 #{property.q } ; 'property'
</echo>\end{lstlisting}

If no entry can be associated with \emph{name}, then \texttt{n\-u\-l\-l} will be the look-{}up's result. This has the interesting consequence, that EL references are \emph{always} disappearing, i.e. can always be resolved. Whereas unknown properties remain as  property references. Consider:

\begin{lstlisting}[firstnumber=1,]
<echo>
 ${not_a_name}  ; ${not_a_name}
 #{not_a_name}  ; ''
</echo>\end{lstlisting}

\subsection{Operators}
\label{el_operators}\hyperlabel{el_operators}%

The following operators are defined in \hyperlink{el}{EL}:
\begin{itemize}

\item{} operator \texttt{e\-m\-p\-t\-y} checks whether a variable is empty or not and returns either \texttt{t\-r\-u\-e} or \texttt{f\-a\-l\-s\-e}. It is important to understand that \texttt{n\-u\-l\-l} is considered empty.



\item{} condition operator \texttt{?\-:} can be used for branching in expressions. The expression \texttt{c\-o\-n\-d ? a : b} evaluates expression \texttt{c\-o\-n\-d} in a Boolean context. If \texttt{e\-v\-a\-l\-(\-c\-o\-n\-d\-)} returns \texttt{t\-r\-u\-e} then the result of the expression is \texttt{e\-v\-a\-l\-(\-a\-)} and otherwise \texttt{e\-v\-a\-l\-(\-b\-)}.



\item{} operators \texttt{.} and  \texttt{[\-]} are used to query properties on objects. See also section \hyperlink{el_properties}{Properties\_}.



\item{} logical operators \texttt{n\-o\-t}, \texttt{a\-n\-d} and \texttt{o\-r} 


\item{} relational operators \texttt{=\-=}, '!=\texttt{, \`{}\-<{}}, \texttt{>{}}, \texttt{<{}\-=} and \texttt{>{}\-=} (resp. \texttt{e\-q}, \texttt{n\-e}, \texttt{l\-t}, \texttt{g\-t}, \texttt{l\-e} and \texttt{g\-e}).



\item{} usual arithmetic operators like \texttt{+}, \texttt{-{}}, \texttt{*}, \texttt{/}, \texttt{m\-o\-d} and \texttt{d\-i\-v} etc.


\end{itemize}

\subsection{Implicit Objects}
\label{el_implicit_objects}\hyperlabel{el_implicit_objects}%

Flaka provides implicit objects that can be utilized writing \hyperlink{el}{EL} expressions:

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%
\begin{longtable}{ll}\hline
\multicolumn{1}{p{25\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Implicit Object %
}&\multicolumn{1}{p{75\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Description%
}\tabularnewline
\endhead
\multicolumn{1}{p{25\newtblstarfactor+\arrayrulewidth}}{\raggedright%
project
%
}&\multicolumn{1}{p{75\newtblstarfactor+\arrayrulewidth}}{\raggedright%
The current Ant project as object. To query the project's default target, base folder and other things (see also \hyperlink{el_project_properties}{project properties} and \hyperlink{el_natural_properties}{natural properties}).
%
}\tabularnewline
\multicolumn{1}{p{25\newtblstarfactor+\arrayrulewidth}}{\raggedright%
property
%
}&\multicolumn{1}{p{75\newtblstarfactor+\arrayrulewidth}}{\raggedright%
Use this object to query project properties.
%
}\tabularnewline
\multicolumn{1}{p{25\newtblstarfactor+\arrayrulewidth}}{\raggedright%
e
%
}&\multicolumn{1}{p{75\newtblstarfactor+\arrayrulewidth}}{\raggedright%
The mathematical number \href{http://en.wikipedia.org/wiki/E_(mathematical_constant)}{e}, also known as \href{http://en.wikipedia.org/wiki/Euler}{Euler}'s number.
%
}\tabularnewline
\multicolumn{1}{p{25\newtblstarfactor+\arrayrulewidth}}{\raggedright%
pi
%
}&\multicolumn{1}{p{75\newtblstarfactor+\arrayrulewidth}}{\raggedright%
The number \href{http://en.wikipedia.org/wiki/PI}{PI}
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

The following implicit objects are deprecated:

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{ll}\hline
\multicolumn{1}{p{25\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Implicit Object %
}&\multicolumn{1}{p{75\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Alternative%
}\tabularnewline
\endhead
\multicolumn{1}{p{25\newtblstarfactor+\arrayrulewidth}}{\raggedright%
reference
%
}&\multicolumn{1}{p{75\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{p\-r\-o\-j\-e\-c\-t\-.\-r\-e\-f\-e\-r\-e\-n\-c\-e\-s}
%
}\tabularnewline
\multicolumn{1}{p{25\newtblstarfactor+\arrayrulewidth}}{\raggedright%
var
%
}&\multicolumn{1}{p{75\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{p\-r\-o\-j\-e\-c\-t\-.\-r\-e\-f\-e\-r\-e\-n\-c\-e\-s}
%
}\tabularnewline
\multicolumn{1}{p{25\newtblstarfactor+\arrayrulewidth}}{\raggedright%
target
%
}&\multicolumn{1}{p{75\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{p\-r\-o\-j\-e\-c\-t\-.\-t\-a\-r\-g\-e\-t\-s}
%
}\tabularnewline
\multicolumn{1}{p{25\newtblstarfactor+\arrayrulewidth}}{\raggedright%
taskdef
%
}&\multicolumn{1}{p{75\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{p\-r\-o\-j\-e\-c\-t\-.\-t\-a\-s\-k\-d\-e\-f\-s}
%
}\tabularnewline
\multicolumn{1}{p{25\newtblstarfactor+\arrayrulewidth}}{\raggedright%
macrodefs
%
}&\multicolumn{1}{p{75\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{p\-r\-o\-j\-e\-c\-t\-.\-m\-a\-c\-r\-o\-d\-e\-f\-s}
%
}\tabularnewline
\multicolumn{1}{p{25\newtblstarfactor+\arrayrulewidth}}{\raggedright%
tasks
%
}&\multicolumn{1}{p{75\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{p\-r\-o\-j\-e\-c\-t\-.\-t\-a\-s\-k\-s}
%
}\tabularnewline
\multicolumn{1}{p{25\newtblstarfactor+\arrayrulewidth}}{\raggedright%
filter
%
}&\multicolumn{1}{p{75\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{p\-r\-o\-j\-e\-c\-t\-.\-f\-i\-l\-t\-e\-r\-s}
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsection{Functions}
\label{el_functions}\hyperlabel{el_functions}%

This sections presents functions defined by Flaka and which are available without any further action. Notice that providing own functions is currently not possible. A note about the conventions used in the notation of function signatures:
\begin{itemize}

\item{} \emph{T} is a placeholder meaning any type



\item{} \emph{T..} means that a variable list of arguments of type \emph{T} can be used



\item{} \emph{name:T} is used to give a parameter a name which is then used in the follow up explanation of this function.


\end{itemize}

\subsubsection{Generic Functions}
\label{_generic_functions}\hyperlabel{_generic_functions}%

\paragraph{\texttt{t\-y\-p\-e\-o\-f\-(\-T\-)\-:\-s\-t\-r\-i\-n\-g}}
\label{_literal_typeof_t_string_literal}\hyperlabel{_literal_typeof_t_string_literal}%

A function to determine the object's type:

\begin{lstlisting}[firstnumber=1,]
typeof(null)               ; 'null'
typeof('')                 ; 'string'
typeof(3)                  ; 'integer'
typeof(pi)                 ; 'float'
typeof(true)               ; 'boolean'
typeof(list())             ; 'list'
typeof(file('.'))          ; 'file'
typeof(project)            ; 'project'
typeof(project.properties) ; 'map'
typeof(other)              ; 'object'\end{lstlisting}

\paragraph{\texttt{n\-a\-t\-i\-v\-e\-t\-y\-p\-e\-(\-T\-)\-:\-s\-t\-r\-i\-n\-g}}
\label{_literal_nativetype_t_string_literal}\hyperlabel{_literal_nativetype_t_string_literal}%

Use this function to determine native type, the type of the underlying implementation, of the given argument.

\begin{lstlisting}[firstnumber=1,]
nativetype(null)                ; ''
nativetype('')                  ; 'java.lang.String'
nativetype(3)                   ; 'java.lang.Long'
nativetype(pi)                  ; 'java.lang.Double'
nativetype(true)                ; 'java.lang.Boolean'
nativetype(list())              ; 'java.util.ArrayList'
nativetype(file(project))       ; 'java.io.File'
nativetype(project)             ; 'org.apache.ant.tools.Project'
nativetype(project.properties)  ; 'java.util.Hashtable'
nativetype(file(project).mtime) ; 'java.util.Date'\end{lstlisting}

\paragraph{\texttt{s\-i\-z\-e\-(\-T\-)\-:\-i\-n\-t\-e\-g\-e\-r}}
\label{_literal_size_t_integer_literal}\hyperlabel{_literal_size_t_integer_literal}%

The size of the object is given by the number of entities it contains. This is 0 (zero) for all primitive types like \texttt{i\-n\-t\-e\-g\-e\-r}, \texttt{n\-u\-l\-l}, \texttt{f\-l\-o\-a\-t}, \texttt{b\-o\-o\-l\-e\-a\-n}. Otherwise the object's size is determined via a \texttt{s\-i\-z\-e} or \texttt{l\-e\-n\-g\-t\-h} property.

\begin{lstlisting}[firstnumber=1,]
size(null)            ; 0
size(3)               ; 0
size(pi)              ; 0
size(true)            ; 0
size('abc')           ; 3
size(list(1,2))       ; 2
size(file(..))        ; see below
size(project)         ; 0
size(object)          ; object.size or object.length or 0\end{lstlisting}

If the argument of \texttt{s\-i\-z\-e\-(\-)} is of type \emph{file} and the argument denotes an existing and accessible directory \emph{d}, then \texttt{s\-i\-z\-e\-(\-d\-)} returns the amount of files and folders in \emph{d}. Otherwise, if the argument denotes an existing and accessible file, then the length of that file is returned. Otherwise, size() will return 0.

\paragraph{\texttt{n\-u\-l\-l\-p\-(\-T\-)\-:\-b\-o\-o\-l\-e\-a\-n}}
\label{_literal_nullp_t_boolean_literal}\hyperlabel{_literal_nullp_t_boolean_literal}%

Evaluates to \texttt{t\-r\-u\-e} if object is the \texttt{n\-u\-l\-l} entity and \texttt{f\-a\-l\-s\-e} otherwise. Compare this function with operator \texttt{e\-m\-p\-t\-y} which returns \texttt{t\-r\-u\-e} if either the object in question does not exist or if literally empty, for example the empty list or the empty string.

\begin{lstlisting}[firstnumber=1,]
nullp(null)            ; true
nullp(list())          ; false
nullp('')              ; false
empty null             ; true
empty list()           ; true
empty ''               ; true\end{lstlisting}

\subsubsection{File and Folder Functions}
\label{_file_and_folder_functions}\hyperlabel{_file_and_folder_functions}%

\paragraph{\texttt{f\-i\-l\-e\-(\-T\-.\-.\-)\-:\-f\-i\-l\-e}}
\label{_literal_file_t_file_literal}\hyperlabel{_literal_file_t_file_literal}%

A function to create a \texttt{f\-i\-l\-e} object. If \texttt{f\-i\-l\-e\-(\-)} is called without argument, then the current working directory is returned. Otherwise, if the function is called with one argument and that argument is already a file, the argument is simply returned. Otherwise, if the argument's type is \texttt{p\-r\-o\-j\-e\-c\-t}, then the base directory of that Ant project is returned. If the argument is a \texttt{l\-i\-s\-t} type, the a file is constructed based on the list's elements. Otherwise the argument stringized. If the stringized argument consists only of whitespace, then the current working directory is returned while otherwise that string is taken as the file's path name. If \texttt{f\-i\-l\-e\-(\-)} is called with two or more arguments, then the behaviour is the same as if \texttt{f\-i\-l\-e\-(\-)} would have been called with one list argument where the list consists of the function's arguments.

\begin{lstlisting}[firstnumber=1,]
file()               ; your JVM current work directory
file('.')            ; file()
file(file(arg))      ; file(arg)
file(project)        ; project.basedir
file(list('/',a))    ; file('/',file(a))
file(other)          ; file(format('%s',other))
file(a,b,c)          ; file(list(a,b,c))
file(a,list(b,c),d)  ; file(list(a,b,c,d))\end{lstlisting}

\subsubsection{String Functions}
\label{_string_functions}\hyperlabel{_string_functions}%

\paragraph{\texttt{c\-o\-n\-c\-a\-t\-(\-T\-.\-.\-)\-:\-s\-t\-r\-i\-n\-g}}
\label{_literal_concat_t_string_literal}\hyperlabel{_literal_concat_t_string_literal}%

Creates a string by concatenating all \emph{stringized} objects. If no object is provided, the empty string is returned. Thus to create the string \texttt{f\-o\-o\-b\-a\-r}, try

\begin{lstlisting}[firstnumber=1,]
concat('foo','bar')  ; 'foobar'\end{lstlisting}

\paragraph{\texttt{f\-o\-r\-m\-a\-t\-(\-s\-t\-r\-i\-n\-g\-,\-T\-.\-.\-)\-:\-s\-t\-r\-i\-n\-g}}
\label{_literal_format_string_t_string_literal}\hyperlabel{_literal_format_string_t_string_literal}%

This function is a Swiss army knife for creating a string based on existing objects. The functions expects a format string as first argument followed by any number of arguments. The optional arguments are used to construct the result string based on format instructions embedded in the first argument. Some examples:

\begin{lstlisting}[firstnumber=1,]
format('foobar')           ; 'foobar'
format('foo%s','bar')      ; 'foobar'
format('%s%S','foo','bar') ; 'fooBAR'
format('%s',list('a',2))   ; '[a, 2]'\end{lstlisting}

The number of format options to be used are almost infinite \footnote{
Compare \href{http://download.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html}{http://download.oracle.com/\-javase/\-1.5.0/\-docs/\-api/\-java/\-util/\-Formatter.html}
}.

\paragraph{\texttt{r\-e\-p\-l\-a\-c\-e\-(\-s\-t\-r\-i\-n\-g\-, s\-u\-b\-s\-t\-:\-T\-, r\-e\-g\-e\-x\-:\-T\-)\-:\-s\-t\-r\-i\-n\-g}}
\label{_literal_replace_string_subst_t_regex_t_string_literal}\hyperlabel{_literal_replace_string_subst_t_regex_t_string_literal}%

Create a new string by replacing substrings. Substrings to be replaced are described via regular expressions. If no substitute string is given, the empty string is used. The default regular expression is \texttt{\textbackslash{}\-s\-*\-,\-\textbackslash{}\-s\-*} which means, that all commas -{} including leading and trailing whitespace -{} are replaced. Arguments are stringized before used.

\begin{lstlisting}[firstnumber=1,]
replace('a, b')              ; 'ab'
replace('a, b','')           ; 'ab'
replace('a, b','','\s*,\s*')  ; 'ab'
replace(true,'false','true') ; 'false'\end{lstlisting}

The behaviour of this function is undefined if called without arguments.

\paragraph{\texttt{s\-p\-l\-i\-t\-(\-s\-t\-r\-i\-n\-g\-, r\-e\-g\-e\-x\-:\-T\-)\-:\-l\-i\-s\-t}}
\label{_literal_split_string_regex_t_list_literal}\hyperlabel{_literal_split_string_regex_t_list_literal}%

A function to tokenize a string into a list of strings. Tokens are separated from each other by text matching a given regular expression. Arguments are stringized before used. If no regular expression is given, then \texttt{\textbackslash{}\-*\-s\-,\-\textbackslash{}\-s\-*} is used. The behaviour is undefined if no arguments are given.

\begin{lstlisting}[firstnumber=1,]
split('a,b')          ; list('a','b')
split('a:b',':')      ; list('a','b')\end{lstlisting}

\paragraph{\texttt{t\-r\-i\-m\-(\-s\-t\-r\-i\-n\-g\-)\-:\-s\-t\-r\-i\-n\-g}}
\label{_literal_trim_string_string_literal}\hyperlabel{_literal_trim_string_string_literal}%

A convenience function to remove leading and trailing whitespace from a string (stringized object). This function can be expressed in terms of function \texttt{r\-e\-p\-l\-a\-c\-e\-(\-)} like

\begin{lstlisting}[firstnumber=1,]
trim(s)              ; replace(s,'','^\s*|\s*$')\end{lstlisting}

\paragraph{\texttt{l\-t\-r\-i\-m\-(\-s\-t\-r\-i\-n\-g\-)\-:\-s\-t\-r\-i\-n\-g}}
\label{_literal_ltrim_string_string_literal}\hyperlabel{_literal_ltrim_string_string_literal}%

Similar to function \texttt{t\-r\-i\-m\-(\-)} above but only leading whitespace is being removed.

\begin{lstlisting}[firstnumber=1,]
ltrim(s)              ; replace(s,'','^\s*')\end{lstlisting}

\paragraph{\texttt{r\-t\-r\-i\-m\-(\-s\-t\-r\-i\-n\-g\-)\-:\-s\-t\-r\-i\-n\-g}}
\label{_literal_rtrim_string_string_literal}\hyperlabel{_literal_rtrim_string_string_literal}%

Similar to function \texttt{t\-r\-i\-m\-(\-)} above but only trailing whitespace is being removed.

\begin{lstlisting}[firstnumber=1,]
rtrim(s)              ; replace(s,'','\s*$')\end{lstlisting}

\subsubsection{List Functions}
\label{_list_functions}\hyperlabel{_list_functions}%

This sections lists EL functions operating on lists where a list is a synonym for any collection of elements. In case you are missing a function to retrieve the n-{}th list element, then try

\begin{lstlisting}[firstnumber=1,]
list('a','b','c')[1]           ; 'b'\end{lstlisting}

\paragraph{\texttt{l\-i\-s\-t\-(\-T\-.\-.\-)\-:\-l\-i\-s\-t}}
\label{_literal_list_t_list_literal}\hyperlabel{_literal_list_t_list_literal}%

A function taking a arbitrary number of elements to create a list object. Returns the empty list when called without arguments.

\begin{lstlisting}[firstnumber=1,]
list()                ; []
list('a',2)           ; ['a',2]
list(list('a',2))     ; [['a',2]]\end{lstlisting}

\paragraph{\texttt{a\-p\-p\-e\-n\-d\-(\-T\-.\-.\-)\-:\-l\-i\-s\-t}}
\label{_literal_append_t_list_literal}\hyperlabel{_literal_append_t_list_literal}%

This function is similar to \texttt{l\-i\-s\-t} by creating a list based on given arguments. However, each argument being a list is treated in a special way by appending the list elements rather the list itself.

\begin{lstlisting}[firstnumber=1,]
append()                       ; list()
append('a',2)                  ; list('a',2)
append(1,list('a',2),true)     ; list(1,'a',2,true)\end{lstlisting}

\paragraph{\texttt{j\-o\-i\-n\-(\-s\-t\-r\-i\-n\-g\-,\-l\-i\-s\-t\-)\-:\-s\-t\-r\-i\-n\-g}}
\label{_literal_join_string_list_string_literal}\hyperlabel{_literal_join_string_list_string_literal}%

This functions creates a string by joining elements in \texttt{l\-i\-s\-t} with the first argument. The first argument is stringized. If the second argument not given, the empty string is returned. Otherwise, if the second argument is not a list, then the stringized second argument is returned. The behaviour is undefined if called without arguments.

\begin{lstlisting}[firstnumber=1,]
join(':')                    ; ''
join(':',5)                  ; '5'
join(':',list('a',2))        ; 'a:2'\end{lstlisting}

If this function is called with more then two arguments, then all arguments but the first are collected into a list object and then processed like described above.

\begin{lstlisting}[firstnumber=1,]
join(':','a',2)              ; join(':',list('a',2))\end{lstlisting}

\subsubsection{Mathematical Functions}
\label{_mathematical_functions}\hyperlabel{_mathematical_functions}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{ll}\hline
\multicolumn{1}{p{45\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Function %
}&\multicolumn{1}{p{55\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Description%
}\tabularnewline
\endhead
\multicolumn{1}{p{45\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{s\-i\-n\-(\-d\-o\-u\-b\-l\-e\-)\-:\-d\-o\-u\-b\-l\-e}
%
}&\multicolumn{1}{p{55\newtblstarfactor+\arrayrulewidth}}{\raggedright%
The mathematical \href{http://en.wikipedia.org/wiki/Trigonometric_functions}{sine} function
%
}\tabularnewline
\multicolumn{1}{p{45\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{c\-o\-s\-(\-d\-o\-u\-b\-l\-e\-)\-:\-d\-o\-u\-b\-l\-e}
%
}&\multicolumn{1}{p{55\newtblstarfactor+\arrayrulewidth}}{\raggedright%
The mathematical \href{http://en.wikipedia.org/wiki/Trigonometric_functions}{cosine} function
%
}\tabularnewline
\multicolumn{1}{p{45\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{t\-a\-n\-(\-d\-o\-u\-b\-l\-e\-)\-:\-d\-o\-u\-b\-l\-e}
%
}&\multicolumn{1}{p{55\newtblstarfactor+\arrayrulewidth}}{\raggedright%
The mathematical \href{http://en.wikipedia.org/wiki/Trigonometric_functions}{tangent} function
%
}\tabularnewline
\multicolumn{1}{p{45\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{e\-x\-p\-(\-d\-o\-u\-b\-l\-e\-)\-:\-d\-o\-u\-b\-l\-e}
%
}&\multicolumn{1}{p{55\newtblstarfactor+\arrayrulewidth}}{\raggedright%
The mathematical exponential function, \texttt{e} raised to the power of the given argument
%
}\tabularnewline
\multicolumn{1}{p{45\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{l\-o\-g\-(\-d\-o\-u\-b\-l\-e\-)\-:\-d\-o\-u\-b\-l\-e}
%
}&\multicolumn{1}{p{55\newtblstarfactor+\arrayrulewidth}}{\raggedright%
The mathematical logarithm function of base \texttt{e}
%
}\tabularnewline
\multicolumn{1}{p{45\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{p\-o\-w\-(\-d\-o\-u\-b\-l\-e\-,\-d\-o\-u\-b\-l\-e\-)\-:\-d\-o\-u\-b\-l\-e}
%
}&\multicolumn{1}{p{55\newtblstarfactor+\arrayrulewidth}}{\raggedright%
Returns the value of the first argument raised to the power of the second argument.
%
}\tabularnewline
\multicolumn{1}{p{45\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{s\-q\-r\-t\-(\-d\-o\-u\-b\-l\-e\-)\-:\-d\-o\-u\-b\-l\-e}
%
}&\multicolumn{1}{p{55\newtblstarfactor+\arrayrulewidth}}{\raggedright%
Returns the correctly rounded positive square root of a double value.
%
}\tabularnewline
\multicolumn{1}{p{45\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{a\-b\-s\-(\-d\-o\-u\-b\-l\-e\-)\-:\-d\-o\-u\-b\-l\-e}
%
}&\multicolumn{1}{p{55\newtblstarfactor+\arrayrulewidth}}{\raggedright%
Returns the absolute value of a double value.
%
}\tabularnewline
\multicolumn{1}{p{45\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{m\-i\-n\-(\-d\-o\-u\-b\-l\-e\-, d\-o\-u\-b\-l\-e\-)\-:\-d\-o\-u\-b\-l\-e}
%
}&\multicolumn{1}{p{55\newtblstarfactor+\arrayrulewidth}}{\raggedright%
Returns the smaller of two double values.
%
}\tabularnewline
\multicolumn{1}{p{45\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{m\-a\-x\-(\-d\-o\-u\-b\-l\-e\-, d\-o\-u\-b\-l\-e\-)\-:\-d\-o\-u\-b\-l\-e}
%
}&\multicolumn{1}{p{55\newtblstarfactor+\arrayrulewidth}}{\raggedright%
Returns the larger of two double values.
%
}\tabularnewline
\multicolumn{1}{p{45\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{r\-a\-n\-d\-(\-)\-:\-d\-o\-u\-b\-l\-e}
%
}&\multicolumn{1}{p{55\newtblstarfactor+\arrayrulewidth}}{\raggedright%
Returns a double value with a positive sign, greater than or equal to 0.0 and less than 1.0.
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsection{Properties}
\label{el_properties}\hyperlabel{el_properties}%

It's best to introduce properties with three simple examples. It's about to ask a string about his uppercase variant, about it's length and about to create a folder with the string's value.

\begin{lstlisting}[firstnumber=1,]
'abc'.toupper           ; 'ABC'
'abc'.length            ; 3
'abc'['tofile'].mkdir   ; true/false\end{lstlisting}

The specification of EL provides only a notation to query an object for a property. EL does not specify which properties must exist nor does it require that an object must have any properties. Each implementation is free to define properties according to the underlying implementation and usage domain. What is specified however is, how to query a property. Consider:

\begin{lstlisting}[firstnumber=1,]
obj.name
obj['name.with.dot']\end{lstlisting}

The first variation is the standard notation to look-{}up property \texttt{n\-a\-m\-e} on object \texttt{o\-b\-j}. Here \texttt{n\-a\-m\-e} can be composed of almost any character but character \texttt{.} itself. After all, \texttt{.} is the look-{}up operator here. This limitation can cause problems in certain domains. Therefore, an alternative look-{}up operator \texttt{[\-]} has been defined by the specification.

Another important point to keep in mind is about looking up a property on the \texttt{n\-u\-l\-l} object and what is the result of asking for a property which does not exist? The perhaps surprising answer is that both case do not cause an error or worse but are perfectly legal and well defined. The result is in both cases the \texttt{n\-u\-l\-l} object. Consider:

\begin{lstlisting}[firstnumber=1,]
null.someproperty        ; null
obj.notexisting          ; null\end{lstlisting}

Now it's about time to tell, which properties are available.

\subsubsection{Natural Properties}
\label{el_natural_properties}\hyperlabel{el_natural_properties}%

A \emph{natural} property \texttt{x} exits if the underlying Java object has a public getter method with the same name as \texttt{x} and where the names are compared case-{}insensitively. Assume that we have on object \texttt{f} of type \texttt{j\-a\-v\-a\-.\-i\-o\-.\-F\-i\-l\-e} \footnote{
see \href{http://download.oracle.com/javase/1.5.0/docs/api/java/io/File.html}{http://download.oracle.com/\-javase/\-1.5.0/\-docs/\-api/\-java/\-io/\-File.html}
}. The following listing shows two natural properties on object \texttt{f} and how \texttt{f} will be used by the underlying EL implementation:

\begin{lstlisting}[firstnumber=1,]
f.name              ; f.getName()
f['parentfile']     ; f.getParentFile()\end{lstlisting}

\subsubsection{Primitive Type Properties}
\label{_primitive_type_properties}\hyperlabel{_primitive_type_properties}%

Primitive data types (integer, float, boolean and null) have no properties.

\subsubsection{List and Array Properties}
\label{_list_and_array_properties}\hyperlabel{_list_and_array_properties}%

Besides \emph{natural} properties can lists and arrays be queried with an \emph{index} returning the element at that position or \texttt{n\-u\-l\-l} if the index is out of range. Consider:

\begin{lstlisting}[firstnumber=1,]
list('a','b')[1]    ; 'b'
list('a','b')[-1]   ; null
list('a','b')[2]    ; null\end{lstlisting}

\subsubsection{String Properties}
\label{el_string_properties}\hyperlabel{el_string_properties}%

Table above lists properties that can be queried besides natural properties:

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{lll}\hline
\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Property %
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Type %
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Description%
}\tabularnewline
\endhead
\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
length
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
int
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
number of characters in this string
%
}\tabularnewline
\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
size
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
int
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
same as property \texttt{l\-e\-n\-g\-t\-h}
%
}\tabularnewline
\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
tolower
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
string
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
return this string in lowercase characters only
%
}\tabularnewline
\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
toupper
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
string
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
return this string in uppercase characters only
%
}\tabularnewline
\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
trim
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
string
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
remove leading and trailing whitespace characters
%
}\tabularnewline
\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
tofile
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
file
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
create a file based on this string; the so created will be relative to the current build file's base folder if the string's value does not denote a absolute path. Furthermore, the empty string will create a file object denoting the project's base folder (i.e. the folder containing the build script currently executed). Notice that \texttt{.} and \texttt{.\-.} denote absolute paths, not relative ones.
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsubsection{File Properties}
\label{el_file_properties}\hyperlabel{el_file_properties}%

Files and folders is Ant's bread and butter. A couple of properties are defined on file objects to simplify scripting (see below). Consider:

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{lll}\hline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Property %
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Type %
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Description%
}\tabularnewline
\endhead
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{a\-b\-s\-o\-l\-u\-t\-e\-f\-i\-l\-e}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
file
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
The absolute form of this abstract pathname
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{a\-b\-s\-o\-l\-u\-t\-e\-p\-a\-t\-h}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
string
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
The absolute form of this abstract pathname
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{c\-a\-n\-o\-n\-i\-c\-a\-l\-f\-i\-l\-e}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
file
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
The canonical form of this abstract pathname
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{c\-a\-n\-o\-n\-i\-c\-a\-l\-p\-a\-t\-h}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
string
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
The canonical form of this abstract pathname
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{d\-e\-l\-e\-t\-e}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
boolean
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
deletes the file or folder (true); false otherwise
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{e\-x\-i\-s\-t\-s}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
boolean
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
check whether file or folder exists
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{i\-s\-d\-i\-r}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
boolean
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
check whether a folder (directory)
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{i\-s\-f\-i\-l\-e}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
boolean
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
check whether a file
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{i\-s\-h\-i\-d\-d\-e\-n}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
boolean
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
check whether a hidden file or folder
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{i\-s\-r\-e\-a\-d}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
boolean
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
check whether a file or folder is readable
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{i\-s\-w\-r\-i\-t\-e}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
boolean
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
check whether a file or folder is writable
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{l\-e\-n\-g\-t\-h}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
integer
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
same as \texttt{s\-i\-z\-e}
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{l\-i\-s\-t}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
list
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
array of files in folder
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{m\-k\-d\-i\-r}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
boolean
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
creates the folder (and intermediate) folders (true); false otherwise
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{m\-t\-i\-m\-e}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
Date
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
last modification date
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{n\-a\-m\-e}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
string
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
The basename
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{p\-a\-r\-e\-n\-t}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
file
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
parent of file or folder as file object
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{p\-a\-t\-h}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
string
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
abstract pathname into a pathname string.
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{s\-i\-z\-e}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
integer
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
number of bytes in a (existing) file; 0 otherwise
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{t\-o\-a\-b\-s}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
file
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
file or folder as absolute file object
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{t\-o\-s\-t\-r}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
string
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
file name as string object
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{t\-o\-u\-r\-i}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
URI
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
file as URI object
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{t\-o\-u\-r\-l}
%
}&\multicolumn{1}{p{10\newtblstarfactor+\arrayrulewidth}}{\raggedright%
URL
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
file as URL object
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsubsection{Matcher Properties}
\label{el_matcher_properties}\hyperlabel{el_matcher_properties}%

A \emph{matcher object} is created by task \hyperlink{task_switch}{switch} if a regular expression matches a input value. Such a matcher object contains details of the match like the start and end position, the pattern used to match and it allows to explore details of capturing groups (also known as \emph{marked} subexpression).

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{lll}\hline
\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Property %
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Type     %
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Description%
}\tabularnewline
\endhead
\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{s\-t\-a\-r\-t}
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
int
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
The position within the input where the match starts.
%
}\tabularnewline
\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{s}
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
int
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
Same as \texttt{s\-t\-a\-r\-t}
%
}\tabularnewline
\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{e\-n\-d}
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
int
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
The position within the input where the match ends (the character at \texttt{e\-n\-d} is the last matching character)
%
}\tabularnewline
\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{e}
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
int
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
Same as \texttt{e\-n\-d}
%
}\tabularnewline
\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{g\-r\-o\-u\-p\-s}
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
int
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
The number of capturing groups in the (regular) expression.
%
}\tabularnewline
\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{s\-i\-z\-e}
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
int
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
Same as \texttt{g\-r\-o\-u\-p\-s}
%
}\tabularnewline
\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{l\-e\-n\-g\-t\-h}
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
int
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
Same as \texttt{g\-r\-o\-u\-p\-s}
%
}\tabularnewline
\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{n}
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
int
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
Same as \texttt{g\-r\-o\-u\-p\-s}
%
}\tabularnewline
\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{p\-a\-t\-t\-e\-r\-n}
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
string
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
The regular expression that was used for this match. Notice that glob expressions are translated into regular expressions.
%
}\tabularnewline
\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{p}
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
string
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
Same as \texttt{p\-a\-t\-t\-e\-r\-n}
%
}\tabularnewline
\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\emph{i}
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
matcher
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
The matcher object for \emph{i}-{}th capturing group. See task \hyperlink{task_switch}{switch} for examples.
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

The following example shows how to utilize matcher properties:

\begin{lstlisting}[firstnumber=1,]
<c:switch value="foobar">
   <re expr="^(.*)(b.*)$" var="m">
     <echo>
       #{ m          }   ; 'foobar'
       #{ m[0]       }   ; 'foobar'
       #{ m.start    }   ; 0
       #{ m.end      }   ; 5
       #{ m.groups   }   ; 2
       #{ m.pattern  }   ; '^(.*)(b.*)$'
       #{ m[1]       }   ; 'foo'
       #{ m[2]       }   ; 'bar'
       #{ m[1].end   }   ; 2
       #{ m[2].start }   ; 3
     <echo>
   </re>
</c:switch>\end{lstlisting}

\subsubsection{Project Properties}
\label{el_project_properties}\hyperlabel{el_project_properties}%

This sections lists additional properties that can be queried on an object of type \texttt{p\-r\-o\-j\-e\-c\-t}, i.e. of an Ant project. For natural properties, checkout the Javadoc of class org.apache.tools.ant.Project \footnote{
for example \href{http://javadoc.haefelinger.it/org.apache.ant/1.7.1/org/apache/tools/ant/Project.html}{http://javadoc.haefelinger.it/\-org.apache.ant/\-1.7.1/\-org/\-apache/\-tools/\-ant/\-Project.html}
}.

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{lll}\hline
\multicolumn{1}{p{25\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Property  %
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Type %
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Description%
}\tabularnewline
\endhead
\multicolumn{1}{p{25\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{b\-a\-s\-e\-d\-i\-r}
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
file
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
The project's base directory as file object.
%
}\tabularnewline
\multicolumn{1}{p{25\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{t\-a\-r\-g\-e\-t\-s}
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
list
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
A list of all target names
%
}\tabularnewline
\multicolumn{1}{p{25\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{t\-a\-s\-k\-s}
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
list
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
A list of all taskdef and macrodef names
%
}\tabularnewline
\multicolumn{1}{p{25\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{t\-a\-s\-k\-d\-e\-f\-s}
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
list
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
A list of all taskdef names
%
}\tabularnewline
\multicolumn{1}{p{25\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{m\-a\-c\-r\-o\-d\-e\-f\-s}
%
}&\multicolumn{1}{p{15\newtblstarfactor+\arrayrulewidth}}{\raggedright%
list
%
}&\multicolumn{1}{p{60\newtblstarfactor+\arrayrulewidth}}{\raggedright%
A list of all macrodef names
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsection{Type Conversion}
\label{el_type_conversion}\hyperlabel{el_type_conversion}%

Every EL expression is evaluated in the context of an \emph{expected} type. When a evaluated expression does not match it's expected type, implicit type conversion takes place. The following sections list the rules which apply.

\subsubsection{Type boolean}
\label{_type_boolean}\hyperlabel{_type_boolean}%

The following table describes the conversion of object \texttt{o\-b\-j} into an boolean value:

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{ll}\hline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Type        %
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright\bfseries%
%
 Result%
}\tabularnewline
\endhead
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
null
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{f\-a\-l\-s\-e}
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
string
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{f\-a\-l\-s\-e} if obj is \texttt{"\-"}, otherwise \texttt{B\-o\-o\-l\-e\-a\-n\-.\-v\-a\-l\-u\-e\-o\-f\-(\-o\-b\-j\-)}
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
boolean
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
obj
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
file
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\texttt{t\-r\-u\-e} if the file described by obj exists
%
}\tabularnewline
\multicolumn{1}{p{30\newtblstarfactor+\arrayrulewidth}}{\raggedright%
\emph{other}
%
}&\multicolumn{1}{p{70\newtblstarfactor+\arrayrulewidth}}{\raggedright%
false
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\section{Property Tasks}
\label{part4}\hyperlabel{part4}%

\subsection{properties}
\label{task_properties}\hyperlabel{task_properties}%

This task essentially allows one to move the contents of a Ant property file \footnote{
see \href{http://ant.apache.org/manual/Tasks/property.html}{http://ant.apache.org/\-manual/\-Tasks/\-property.html}
} into a build file.

\begin{lstlisting}[firstnumber=1,]
<c:properties>
  ; this is a comment

  ; regular properties
  p0 = hello
  p1 : ${p0}, \
       world!

  ; EL references enabled by default
  p2 = hello, #{ 'world' }!
</c:properties>\end{lstlisting}

This task is quite similar to \hyperlink{tasks_let}{let}. The major difference is that this task is about creating properties in the spirit of Ant while \hyperlink{tasks_let}{let} on the other side, supports in addition the creation of variables, overriding and deleting of properties.

\subsubsection{Attributes}
\label{_attributes}\hyperlabel{_attributes}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{llll}\hline
\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
Attribute
%
}&\multicolumn{1}{p{10\newtblstarfactor}|}{\raggedright%
Type
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
Default
%
}&\multicolumn{1}{p{60\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{d\-e\-b\-u\-g}
%
}&\multicolumn{1}{p{10\newtblstarfactor}|}{\raggedright%
boolean
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
\texttt{f\-a\-l\-s\-e}
%
}&\multicolumn{1}{p{60\newtblstarfactor}|}{\raggedright%
Turn extra debug information on
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{c\-o\-m\-m\-e\-n\-t}
%
}&\multicolumn{1}{p{10\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
\texttt{;}
%
}&\multicolumn{1}{p{60\newtblstarfactor}|}{\raggedright%
The character that starts a comment line
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsubsection{Elements}
\label{_elements}\hyperlabel{_elements}%

This task accepts a implicit text element.

\subsubsection{Behaviour}
\label{_behaviour}\hyperlabel{_behaviour}%

The format to define properties within a this task is a subset of the format supported by Ant. Consider:
\begin{itemize}

\item{} The first non-{}whitespace character of a comment is by default \texttt{;} while a Ant property files use \texttt{\#} and \texttt{!}. The comment character can be changed using attribute \texttt{c\-o\-m\-m\-e\-n\-t}.



\item{} Ant comment lines do not support continuation lines, this task does.



\item{} This task requires that either \texttt{=} or \texttt{:} separates the key from it's value.



\item{} Leading and trailing (!) whitespace characters are ignored. This is different from standard Ant where trailing whitespace is significant \footnote{
.. and responsible for unexpected and hard to track script behaviour
}.



\item{} EL-{}references \texttt{\#\-\{\-.\-.\-\}} are resolved regardless of whether EL has been enabled or not.


\end{itemize}

\subsection{unset}
\label{task_unset}\hyperlabel{task_unset}%

The unset statement allows the removal of properties \footnote{
Removal of user-{}properties is currently not supported
} . Use this task with care as properties are not meant to be changed during execution of a project.

\begin{lstlisting}[firstnumber=1,]
 <c:unset>
   ; remove property p1 ..
   p1
   ; .. and p2
   p\
   2
 </c:unset>
 <fail if="p1" />
 <fail if="p2" />\end{lstlisting}

You may also use the more universal task \hyperlink{task_let}{let} for property removal.

\subsubsection{Attributes}
\label{_attributes_2}\hyperlabel{_attributes_2}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{llll}\hline
\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
Attribute
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
Type
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
Default
%
}&\multicolumn{1}{p{55\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
debug
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
boolean
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
\texttt{f\-a\-l\-s\-e}
%
}&\multicolumn{1}{p{55\newtblstarfactor}|}{\raggedright%
Turn extra debug information on
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
comment
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
\texttt{;}
%
}&\multicolumn{1}{p{55\newtblstarfactor}|}{\raggedright%
The character that starts a comment line
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsubsection{Elements}
\label{_elements_2}\hyperlabel{_elements_2}%

This element accepts implicit text.

\subsubsection{Behaviour}
\label{_behaviour_2}\hyperlabel{_behaviour_2}%

Each non comment line defines a property name to be removed. Comment lines and empty lines are ignored. Continuation lines are accumulated before being processed. EL-{}references are resolved. Consider:

\begin{lstlisting}[firstnumber=1,]
<c:unset>
 ; property 'foo bar', not 'foo' and 'bar'
 foo bar

 ; EL references are resolve, so this will remove
 ; property p15.
 p#{3*5}
</c:unset>\end{lstlisting}

\section{Assignment Tasks}
\label{part3}\hyperlabel{part3}%

\subsection{let}
\label{task_let}\hyperlabel{task_let}%

XML is not particular easy to read for humans. When assigning a couple of variables and properties, this becomes obvious. This elementary task allows to set multiple variables and properties in one go. In addition, comments and continuation lines are allowed for additional readability and comfort. For example:

\begin{lstlisting}[firstnumber=1,]
  <c:let>
    f = 'my/path'
    ; turn f into a file object
    f = file(f)
    b = f.isdir ? true : false
    ; assign a *property*
    p := 'hello world'
    ; override a property if you dare
    p ::= "HELLO \
    WORLD"
  </c:let>\end{lstlisting}

In this example, variable \texttt{f} is first assigned to be a string object (\texttt{'\-m\-y\-/\-p\-a\-t\-h\-'}). The comment line, the one starting with character \texttt{;}, tells what the next line is going to do: turn \texttt{f} into a file object which can then be used for further processing. Here we create variable \texttt{b} which becomes \texttt{t\-r\-u\-e} if \texttt{f} is a directory and \texttt{f\-a\-l\-s\-e} otherwise.

Character \texttt{=} is used to create or set a variable while \texttt{:\-=} indicates to create a property instead. If such a property already exists, it will not be changed in accordance with Ant's standard behaviour. If you however dare to override a property, then you may do so using \texttt{:\-:\-=} as the last example shows.

Notice that the right side of \texttt{=}, \texttt{:\-=} and \texttt{:\-:\-=} is evaluated as EL expression while the left side is expected to constitute a valid identifier for a variable or property.

\subsubsection{Attributes}
\label{_attributes_3}\hyperlabel{_attributes_3}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{llll}\hline
\multicolumn{1}{|p{25\newtblstarfactor}|}{\raggedright%
Attribute
%
}&\multicolumn{1}{p{25\newtblstarfactor}|}{\raggedright%
Type
%
}&\multicolumn{1}{p{25\newtblstarfactor}|}{\raggedright%
Default
%
}&\multicolumn{1}{p{25\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{25\newtblstarfactor}|}{\raggedright%
comment
%
}&\multicolumn{1}{p{25\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{25\newtblstarfactor}|}{\raggedright%
\texttt{;}
%
}&\multicolumn{1}{p{25\newtblstarfactor}|}{\raggedright%
The comment character sequence.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{25\newtblstarfactor}|}{\raggedright%
debug
%
}&\multicolumn{1}{p{25\newtblstarfactor}|}{\raggedright%
boolean
%
}&\multicolumn{1}{p{25\newtblstarfactor}|}{\raggedright%
\texttt{f\-a\-l\-s\-e}
%
}&\multicolumn{1}{p{25\newtblstarfactor}|}{\raggedright%
Turn on extra debug information.
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsubsection{Elements}
\label{_elements_3}\hyperlabel{_elements_3}%

This task accepts an implicit text element.

\subsubsection{Behaviour}
\label{_behaviour_3}\hyperlabel{_behaviour_3}%

A comment line is indicated by starting with character \texttt{;} as first non white-{}space character. This character can be changed to any character sequence using attribute \texttt{c\-o\-m\-m\-e\-n\-t}. Comment lines are ignored from further processing.

Any logical line can be spread across an arbitrary number of contiguous physical lines. A physical line is continued if there is an odd number of contiguous backslash characters \texttt{\textbackslash{}} before the line-{}terminator sequence. The escape character before the line-{}terminator sequence, the line-{}terminator sequence and any whitespace after the line-{}terminator sequence are ignored within a logical line.

Line terminating sequences are \texttt{\textbackslash{}\-r}, \texttt{\textbackslash{}\-n} or \texttt{\textbackslash{}\-r\-\textbackslash{}\-n}. Whitespace characters are tab (\texttt{\textbackslash{}\-t}), formfeed (\texttt{\textbackslash{}\-f}) and the blank character (space). The escape character is backslash (\texttt{\textbackslash{}}).

When the text element is processed, then all comment lines are removed in a first step and all physical lines are transformed into logical lines. Then each logical line is processed in syntactical order. Empty \footnote{
A line is considered empty if consisting of whitespace characters only
} logical lines are discarded. Otherwise, each non-{}empty logical line is broken up into a key and value part by using the first occurrance of sequence \texttt{=}, \texttt{:\-=} or \texttt{:\-:\-=}. Leading and trailing whitespace characters are removed from key and value and escaped characters are replaced. Then, property and EL references are resolved in key and value. Eventually the value is evaluated as EL expression and stored as variable or property. When stored as property, the evaluated value will be coerced into a string.

\subsubsection{Then meaning of \texttt{n\-u\-l\-l} and \emph{void}}
\label{_then_meaning_of_literal_null_literal_and_emphasis_void_emphasis}\hyperlabel{_then_meaning_of_literal_null_literal_and_emphasis_void_emphasis}%

This task can also be used to \emph{remove} variables and properties. The following table gives an overview of the meaning of \texttt{n\-u\-l\-l} and \emph{void} \footnote{
\emph{void} means that the absence of any characters
} on the right side of an assignment:

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{99}}%

\begin{longtable}{lll}\hline
\multicolumn{1}{|p{33\newtblstarfactor}|}{\raggedright%
Assignment Type
%
}&\multicolumn{1}{p{33\newtblstarfactor}|}{\raggedright%
Evaluated Value
%
}&\multicolumn{1}{p{33\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\multicolumn{1}{|p{33\newtblstarfactor}|}{\raggedright%
\texttt{=}
%
}&\multicolumn{1}{p{33\newtblstarfactor}|}{\raggedright%
\texttt{n\-u\-l\-l}
%
}&\multicolumn{1}{p{33\newtblstarfactor}|}{\raggedright%
Remove variable if existing, else do nothing
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\multicolumn{1}{|p{33\newtblstarfactor}|}{\raggedright%
\texttt{=}
%
}&\multicolumn{1}{p{33\newtblstarfactor}|}{\raggedright%
\emph{void}
%
}&\multicolumn{1}{p{33\newtblstarfactor}|}{\raggedright%
Same as \texttt{= n\-u\-l\-l}
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\multicolumn{1}{|p{33\newtblstarfactor}|}{\raggedright%
\texttt{:\-=}
%
}&\multicolumn{1}{p{33\newtblstarfactor}|}{\raggedright%
\texttt{n\-u\-l\-l}
%
}&\multicolumn{1}{p{33\newtblstarfactor}|}{\raggedright%
Nothing
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\multicolumn{1}{|p{33\newtblstarfactor}|}{\raggedright%
\texttt{:\-=}
%
}&\multicolumn{1}{p{33\newtblstarfactor}|}{\raggedright%
\emph{void}
%
}&\multicolumn{1}{p{33\newtblstarfactor}|}{\raggedright%
Same as \texttt{:\-= n\-u\-l\-l}
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\multicolumn{1}{|p{33\newtblstarfactor}|}{\raggedright%
\texttt{:\-:\-=}
%
}&\multicolumn{1}{p{33\newtblstarfactor}|}{\raggedright%
\texttt{n\-u\-l\-l}
%
}&\multicolumn{1}{p{33\newtblstarfactor}|}{\raggedright%
Remove property
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\multicolumn{1}{|p{33\newtblstarfactor}|}{\raggedright%
\texttt{:\-:\-=}
%
}&\multicolumn{1}{p{33\newtblstarfactor}|}{\raggedright%
\emph{void}
%
}&\multicolumn{1}{p{33\newtblstarfactor}|}{\raggedright%
Same as \texttt{:\-:\-= n\-u\-l\-l}
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsubsection{Examples}
\label{_examples}\hyperlabel{_examples}%

To start with, some basic examples.

\begin{lstlisting}[firstnumber=1,]
<c:let>
 ; a comment line
 ; variable x will hold integer 12
 x   = 3 * 4
 ; property p will hold string '12'
 p  := 3 * 4
 ; ignored, cause property p exists already
 p  := 'twelve'
 ; override property p to hold string value '12'
 p ::= 'twelve'
</c:let>\end{lstlisting}

It is perfectly legal to use property or variable references. Variables and properties created within \texttt{l\-e\-t} can also be used. Be aware that property references are resolved \emph{before} EL references. Consider:

\begin{lstlisting}[firstnumber=1,]
<property name="a" value="a" />
<c:let>
 ; variabe v becomes the string object 'bar' and property p
 ; becomes 'foobar'
 v  = 'b${a}r'
 p := 'foo#{v}'
 ; property- and El-references can be used on both sides. Here we
 ; override property 'a' to become string value `bar`
 ${a} ::= '#{v}'
 ; This will not work as planned cause there is no property
 ; with that weired name '#{v}'.
 f = ${#{v}}
</c:let>\end{lstlisting}

The following kind of meta programming will \emph{not} work for \texttt{l\-e\-t} cause property and EL references are resolved after the logical line has been broken up in a key and value part:

\begin{lstlisting}[firstnumber=1,]
<c:let>
  ; This example will NOT work as planned
  assigntype := condition ? '=' : ':='
  key ${assigntype} el-expr
</c:let>\end{lstlisting}

\subsection{list}
\label{task_list}\hyperlabel{task_list}%

A elementary task to create a variable containing a \emph{list} of objects.

\begin{lstlisting}[firstnumber=1,]
<c:list var="mylist">
  ;; each line is a EL expression
  3 * 5
  ;; each line defines a list element
  list('a',1,''.tofile)
</c:list>\end{lstlisting}

\subsubsection{Attributes}
\label{_attributes_4}\hyperlabel{_attributes_4}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{lllll}\hline
\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
Attribute
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
Type
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
Default
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
\hyperlink{el}{EL}
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
Meaning
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\cline{5-5}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
var
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
r
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
The name of the variable to be assigned.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\cline{5-5}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
comment
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
\texttt{;}
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
The comment character
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\cline{5-5}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
debug
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
bool
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
false
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
Turn on extra debug information.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\cline{5-5}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
el
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
bool
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
true
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
no
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
Enable evaluation as EL expression
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsubsection{Elements}
\label{_elements_4}\hyperlabel{_elements_4}%

This task may contain a implicit text element.

\subsubsection{Behaviour}
\label{_behaviour_4}\hyperlabel{_behaviour_4}%

This task creates and assigns in any case a (possible) empty list, especially if no text element is present. The name of the variable is given by attribute \texttt{v\-a\-r}. This attribute may contain references to EL expressions.

If given text element is parsed on a line by line basis, honouring comments and continuation lines. Each line will be evaluated as EL expression after having resolved \texttt{\$\-\{\-.\-.\-\}} and \texttt{\#\-\{\-.\-.\-\}} references. A illegal EL expression will be discarded while the evaluation of lines continues. Turn on extra debug information in case of problems.

The evaluation of a valid EL expression results in an object. Each such object will be added to a list in the order imposed by the lines.

A single line canâ€™t have more than one EL expressions. Thus the following example is invalid:

\begin{lstlisting}[firstnumber=1,]
<c:list var="mylist">
 ;; not working
 3 * 5  'hello, world'
</c:list>\end{lstlisting}

Use attribute \texttt{e\-l} to disable the interpretation of a line as \hyperlink{el}{EL} expression:

\begin{lstlisting}[firstnumber=1,]
<c:list var="mystrings" el="false">
 3 * 5
 ;; assume that variable message has (string) value 'world'
 hello, #{message}
</c:list>\end{lstlisting}

This creates a list variable \texttt{m\-y\-s\-t\-r\-i\-n\-g\-s} containing two elements. The first element will be string \texttt{3 * 5} and the second element will be string \texttt{h\-e\-l\-l\-o\-, w\-o\-r\-l\-d}. Notice that even if EL evaluation has been turned off, EL references can still be used.

\section{Reporting Tasks}
\label{part5}\hyperlabel{part5}%

\subsection{echo}
\label{task_echo}\hyperlabel{task_echo}%

Task \texttt{<{}\-c\-:\-e\-c\-h\-o\-/\->{}} is an extension of Ant's standard \texttt{e\-c\-h\-o} task \footnote{
see \href{http://ant.apache.org/manual/Tasks/echo.html}{http://ant.apache.org/\-manual/\-Tasks/\-echo.html}
} to generate nicly formatted output.  Ant's standard \texttt{e\-c\-h\-o} task is rather fragile when it comes to reformatting XML. Here is a simple example where the output dumped is shown on the right side:

\begin{lstlisting}[firstnumber=1,]
<echo>foobar</echo>       ; '[echo] foobar'\end{lstlisting}

Then, one day you reformat your XML input \footnote{
\href{http://xmlsoft.org/xmllint.html}{xmlint} is a good choice
} ending up in \footnote{
In order to visualize space characters, character dot (\texttt{.}) is going to be used within this chapter
}

\begin{lstlisting}[firstnumber=1,]
<echo>                   ; '[echo]'
...foobar                ; '[echo] ...foobar'
</echo>                  ; '[echo]'\end{lstlisting}

All of a sudden there are three more space characters in front of \texttt{f\-o\-o\-b\-a\-r} and, to make matters worse, there are two additional empty lines printed. Compare this output with Flaka's \texttt{e\-c\-h\-o}

\begin{lstlisting}[firstnumber=1,]
<c:echo>
  foobar                 ; '[c:echo] foobar'
</c:echo>\end{lstlisting}

which I believe is what you had in mind. Besides being invariant regarding formatting, \texttt{e\-c\-h\-o} supports other features in helping to generate pretty output.

\subsubsection{Attributes}
\label{_attributes_5}\hyperlabel{_attributes_5}%

This tasks supports all attributes inherited from Ant's echo task. In addition, further supported attributes are:

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{llll}\hline
\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
Attribute
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
Type
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
Default
%
}&\multicolumn{1}{p{55\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{d\-e\-b\-u\-g}
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
boolean
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
false
%
}&\multicolumn{1}{p{55\newtblstarfactor}|}{\raggedright%
Enables additional debug output for this particular task.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{c\-o\-m\-m\-e\-n\-t}
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
\texttt{;}
%
}&\multicolumn{1}{p{55\newtblstarfactor}|}{\raggedright%
Change the start-{}of-{}commentline character
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{s\-h\-i\-f\-t}
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
\`{}\`{}
%
}&\multicolumn{1}{p{55\newtblstarfactor}|}{\raggedright%
Prefix for each output line
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

Notice that \textbf{debug} output will be written on stream \texttt{s\-t\-d\-e\-r\-r} regardless whether \texttt{d\-e\-b\-u\-g} has been globally enabled on Ant or not. Also standard Ant loggers and listeneres are ignored. The default value is \texttt{f\-a\-l\-s\-e}, i.e. no additional output is created.

\subsubsection{Elements}
\label{_elements_5}\hyperlabel{_elements_5}%

This task optionally accepts implicit text.

\subsubsection{Behaviour}
\label{_behaviour_5}\hyperlabel{_behaviour_5}%

Comment lines are stripped from input. A comment line is a natural line starting with whitespace characters followed by character \texttt{;} or character sequence given via attribute \texttt{c\-o\-m\-m\-e\-n\-t}. In a subsequent step, continuation lines merged into logical lines.

To support \textbf{decent formatting}, unnecessary whitespace characters are removed. The process is illustrated \footnote{
Again character dot \texttt{.} is used to illustrate a whitespace character with the exception of line ending characters
} using the introduction example used above:

\begin{lstlisting}[firstnumber=1,]
<c:echo>
..foo                ; 'foo'
...bar               ; '.bar'
.baz                 ; 'baz'
</c:echo>\end{lstlisting}

In a first step, the number of whitespace characters before the first non-{}whitespace character is determined. This will be \texttt{2} in the example above. Then the whole printable content is being left shifted by this amount. This gives then the output shown as above. Notice that \texttt{f\-o\-o} and \texttt{b\-a\-z} are now on the same idendation level by this left-{}shift.

It is possible to perform a right-{}shift of content \emph{after} the automatic left shift:

\begin{lstlisting}[firstnumber=1,]
<c:echo shift="5">
..foo                ; '.....foo'
</c:echo>\end{lstlisting}

Attribute shift expects a unsigned integral number followed by an optinal arbitrary sequence of characters. This allows for a different \emph{shift} character sequence as show next:

\begin{lstlisting}[firstnumber=1,]
<c:echo shift="5> ">
..foobar              ; '> > > > >foobar'
</c:echo>\end{lstlisting}

\subsubsection{Examples}
\label{_examples_2}\hyperlabel{_examples_2}%

Create a single output line consisting of 20 times character \texttt{\%}:

\begin{lstlisting}[firstnumber=1,]
<c:echo shift="20%" />   ; '%%%%%%%%%%%%%%%%%%%%'\end{lstlisting}

Type a comment in echo to document what will be echoed:

\begin{lstlisting}[firstnumber=1,]
<c:echo>
  ; make sure that property p is defined here
  p : ${p}         ; 'p : ..'
</c:echo>\end{lstlisting}

Follow the guideline that lines should not exceed 80 characters by using continuation lines if necessary

\begin{lstlisting}[firstnumber=1,]
<c:echo>
  a very long \    ; 'a very long line'
  line
</c:echo>\end{lstlisting}

\hyperlink{el}{EL} is enabled by default:

\begin{lstlisting}[firstnumber=1,]
<c:echo>
  #{3 * 4}   ; '12'
</c:echo>\end{lstlisting}

\subsection{logo}
\label{task_logo}\hyperlabel{task_logo}%

A small handy task to create a kind of \emph{framed} text like

\begin{lstlisting}[firstnumber=1,]
:::::::::::::::::::::::::::::::::::::
::             Text                ::
::          more text              ::
:::::::::::::::::::::::::::::::::::::\end{lstlisting}

This kind of \emph{logo} is easily created and dumped on standard output stream like

\begin{lstlisting}[firstnumber=1,]
<c:logo chr="::" width="20">
  ;; here is my text
  Text
  more text
</c:logo>\end{lstlisting}

where \texttt{c\-h\-r} defines the \emph{wrap character} -{} here \texttt{:\-:} and \texttt{w\-i\-d\-t\-h} defines the overall length of one line -{} here 20 characters.

\subsubsection{Attributes}
\label{_attributes_6}\hyperlabel{_attributes_6}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{llll}\hline
\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
Attributes
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
Type
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
Default
%
}&\multicolumn{1}{p{55\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
chr
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
\texttt{:}
%
}&\multicolumn{1}{p{55\newtblstarfactor}|}{\raggedright%
The wrapping character ..
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
width
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
integer
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
\texttt{8\-0}
%
}&\multicolumn{1}{p{55\newtblstarfactor}|}{\raggedright%
Width of one line in terms of regular characters.
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsubsection{Elements}
\label{_elements_6}\hyperlabel{_elements_6}%

This task accepts an implicit text field. This text field may contain comments (\texttt{;}) and leading whitespace is ignored. Thus the same rules as for task \hyperlink{task_echo}{echo} are applying here.

\subsubsection{Behaviour}
\label{_behaviour_6}\hyperlabel{_behaviour_6}%

Contents of text element is read line by line. Comment lines are ignored. Leading whitespace is ignored. Leading whitespace is determined by the first non-{}whitespace character. See also task \hyperlink{task_echo}{echo} for details.

The contents of each line is centered. Leading and trailing space is filled up with \emph{blanks\_} in order to reach the given line width. If a line is longer than \texttt{w\-i\-d\-t\-h}, then all contents after \texttt{w\-i\-d\-t\-h} characters is silently skipped.

\section{Conditional Tasks}
\label{part6}\hyperlabel{part6}%

With standard Ant, task \href{http://ant.apache.org/manual/CoreTasks/condition.html}{condition} is used to set a property if a condition is given. Then a macro, task or target can be conditionally executed  by checking the existence or absence of that property (using standard attributes \emph{if} or \emph{unless}. Flaka defines a couple of control structures to handle conditionals in a simpler way.

Task \hyperlink{task_when}{when} evaluates an \hyperlink{el}{EL} expressio. If the evaluation gives \texttt{t\-r\-u\-e}, the sequence of tasks are executed. Nothing else happens in case of \texttt{f\-a\-l\-s\-e}.

\begin{lstlisting}[firstnumber=1,]
<c:when test=" expr ">
   ; executed if expr evaluates to true
</c:when>\end{lstlisting}

The logical negation of \texttt{w\-h\-e\-n} is task \hyperlink{task_unless}{unless} which executes the sequence of tasks only in case the evaluation of \emph{expr} returns \texttt{f\-a\-l\-s\-e}.

\begin{lstlisting}[firstnumber=1,]
 <c:unless test=" expr ">
   ; executed if expr evaluates to false
 </c:unless>\end{lstlisting}

The body of \texttt{w\-h\-e\-n} and \texttt{u\-n\-s\-e\-t} may contain any sequence of tasks or macros (or a combination of both).

Task \hyperlink{task_choose}{choose} tests each \texttt{w\-h\-e\-n} condition in turn until an \emph{expr} evalutes to \texttt{t\-r\-u\-e}. It executes then the body of that when condition. Subsequent \texttt{w\-h\-e\-n\-s} are then not further tested (nor executed). If all expressions evaluate to \texttt{f\-a\-l\-s\-e}, an optional \emph{catch-{}all} clause gets executed.

\begin{lstlisting}[firstnumber=1,]
 <c:choose>
  <when test="expr_1">
    ; body_1
  </when>
  ..
  <otherwise> ; optional_
    ; catch all body
  </otherwise>
 <c:/choose>\end{lstlisting}

A programming task often seen is to check whether a (string) value matches a given (string) value. If so, a particular action shall be carried out. This can be done via a series of \emph{when} statements. The nasty thing is to keep track of whether a value matched already. Flaka provides a handy task for this common scenario, the \hyperlink{task_switch}{switch} task:

\begin{lstlisting}[firstnumber=1,]
 <c:switch value=" 'some string' ">
  <matches re="regular expression or pattern" >
    ; body_1
  </case>
  ..
  <otherwise> ; optional
    ; catch all body
  </otherwise>
 </c:switch>\end{lstlisting}

Each case is tried in turn \emph{to match} the string value (given as \hyperlink{el}{EL} expression). If a case matches, the appropriate case body is executed. If it happens that no case matches, then the optional default body is executed. To be of greater value, a regular expression or pattern expression can be used in a case condition.

\subsection{when}
\label{task_when}\hyperlabel{task_when}%

Task when represents a else-{}less if statement. The following example dumps the content of a file to stdout via Ant's echo task if the file exists.

\begin{lstlisting}[firstnumber=1,]
 <c:when test=" 'path/to/file'.tofile.isfile" >
   <c:let var="fname" property="true" value=" f " />
    <loadfile property="__z__" srcFile="${fname}"/>
    <echo message="${__z__}" />
 </c:when>\end{lstlisting}

Note that the example is bit artificial cause Ant's loadfile task is sufficient.

\subsubsection{Attributes}
\label{_attributes_7}\hyperlabel{_attributes_7}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{lllll}\hline
\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
Attribute
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
Type
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
Default
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
EL
%
}&\multicolumn{1}{p{52\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\cline{5-5}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{t\-e\-s\-t}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
\texttt{f\-a\-l\-s\-e}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
expr
%
}&\multicolumn{1}{p{52\newtblstarfactor}|}{\raggedright%
A \hyperlink{el}{EL} expression that must evaluate to \texttt{t\-r\-u\-e} in order to execute the body of this if statement.
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsubsection{Elements}
\label{_elements_7}\hyperlabel{_elements_7}%
\begin{itemize}

\item{} Any tasks or macro instances.


\end{itemize}

\subsection{unless}
\label{task_unless}\hyperlabel{task_unless}%

This task is the logical opposite of task \hyperlink{tasks_when}{when}. It's body is only executed if the condition evaluates to false. See \hyperlink{tasks_when}{when} for details. This example shows how to create a folder named libdir if such a folder does not already exist.

\begin{lstlisting}[firstnumber=1,]
 <c:unless test=" 'libdir'.tofile.isdir ">
  <mkdir dir="libdir" />
 </c:unless>\end{lstlisting}

\subsection{choose}
\label{task_choose}\hyperlabel{task_choose}%

A task implementing a series of \emph{ifelse} statements, i.e. a generalized \emph{if-{}then-{}else} statement.

\subsubsection{Attributes}
\label{_attributes_8}\hyperlabel{_attributes_8}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{lllll}\hline
\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
Attribute
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
Type
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
Default
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
EL
%
}&\multicolumn{1}{p{52\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\cline{5-5}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\emph{when}.test
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
\texttt{f\-a\-l\-s\-e}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
=
%
}&\multicolumn{1}{p{52\newtblstarfactor}|}{\raggedright%
A EL condition. When \texttt{t\-r\-u\-e} corresponding clause will be executed.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\cline{5-5}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\emph{unless}.test
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
\texttt{t\-r\-u\-e}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
=
%
}&\multicolumn{1}{p{52\newtblstarfactor}|}{\raggedright%
A EL condition. When \texttt{f\-a\-l\-s\-e} corresponding clause will be executed.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\cline{5-5}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
debug
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
boolean
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
\texttt{f\-a\-l\-s\-e}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
=
%
}&\multicolumn{1}{p{52\newtblstarfactor}|}{\raggedright%
Turn on extra debug information.
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsubsection{Elements}
\label{_elements_8}\hyperlabel{_elements_8}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{lll}\hline
\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
Element
%
}&\multicolumn{1}{p{35\newtblstarfactor}|}{\raggedright%
Cardinality
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
when
%
}&\multicolumn{1}{p{35\newtblstarfactor}|}{\raggedright%
infinite
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
To be executed if condition evaluates to \texttt{t\-r\-u\-e}
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
unless
%
}&\multicolumn{1}{p{35\newtblstarfactor}|}{\raggedright%
infinite
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
To be executed if condition evaluates to \texttt{f\-a\-l\-s\-e}
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
otherwise
%
}&\multicolumn{1}{p{35\newtblstarfactor}|}{\raggedright%
[0,1]
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
To be executed if no \texttt{w\-h\-e\-n} or \texttt{u\-n\-l\-e\-s\-s} clause got executed
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
default
%
}&\multicolumn{1}{p{35\newtblstarfactor}|}{\raggedright%
[0,1]
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
Synonym for \texttt{o\-t\-h\-e\-r\-w\-i\-s\-e}
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsubsection{Behaviour}
\label{_behaviour_7}\hyperlabel{_behaviour_7}%

Each \texttt{w\-h\-e\-n} and \texttt{u\-n\-l\-e\-s\-s} clause's conditions are evaluated in order given until a claus get's executed. Then, further processing stops ignoring all further elements not taken into account so far. If no \texttt{w\-h\-e\-n} or \texttt{u\-n\-l\-e\-s\-s} clause got executed, then a present \texttt{o\-t\-h\-e\-r\-w\-i\-s\-e} or \texttt{d\-e\-f\-a\-u\-l\-t} clause gets executed.

The shortest possible \texttt{c\-h\-o\-o\-s\-e} statement is

\begin{lstlisting}[firstnumber=1,]
 <c:choose />\end{lstlisting}

It's useless and does nothing, it's completely harmless.

The following example would execute all macros or tasks listed in the \texttt{o\-t\-h\-e\-r\-w\-i\-s\-e} clause cause no \texttt{w\-h\-e\-n} or \texttt{u\-n\-l\-e\-s\-s} clause got executed.

\begin{lstlisting}[firstnumber=1,]
 <c:choose>
  <otherwise>
    <!-- macros/tasks -->
  </otherwise>
 </c:choose>\end{lstlisting}

This would execute all macros and tasks listed in the otherwise clause since no when clause got executed.

\begin{lstlisting}[firstnumber=1,]
 <c:choose>
   <when test=" true == false" >
     <echo>new boolean logic detected ..</echo>
   </when>
   <unless test=" 'mydir'.tofile.isdir ">
     <echo> directory mydir exists already </echo>
   </when>
   <otherwise>
     <echo> Hello,</echo>
     <echo>World</echo>
   </otherwise>
 </c:choose>\end{lstlisting}

\subsection{switch}
\label{task_switch}\hyperlabel{task_switch}%

Task \texttt{s\-w\-i\-t\-c\-h} provides text based pattern matching. An illustrative example:

\begin{lstlisting}[firstnumber=1,]
 <c:switch value="${value}">
  <re expr="(+|-)?(0|[1-9]\d*)" var="g">        (1)
    <c:echo>
      integer with absolute value: #{g[2]}
    </c:echo>
  </re>
  <glob expr"*.jar">                            (2)
   <echo>It is a -- jar!</echo>
  </glob>
  <cmp eq="foo" lt="foo">                       (3)
    <!--  ${val} is less or equals "foo" -->
  </cmp>
  <otherwise>
    <!-- none of the above clauses matched -->
  </otherwise>
 </c:switch>\end{lstlisting}

This example demonstrates, how a given textual value can be compared using (1) regular expressions, (2) using glob expression or (3) compared for equality or alphabetical order. Why providing alternatives for regular expressions? Cause the biggest drawback of regular expressions is their complexity. Compare this two variations to check whether a string value ends in \texttt{.\-j\-a\-r}:

\begin{lstlisting}[firstnumber=1,]
<re="(.*)\.jar" var="g">
  <c:echo>
    basename is #{g[1]}.
  </c:echo>
</re>

<glob="*.jar" var="g">
  <c:echo>
    filename is #{g[0]}.
  </c:echo>
</glob>\end{lstlisting}

The latter one, the glob expression, is much easier to grasp. There, \texttt{*} just stands for a sequence of arbitrary characters. In most pattern recognition tasks, this is all what is needed to get going. If more power is required, then regular expressions are the tool to be applied. Eventually \texttt{c\-m\-p} allows for simple text comparison without any meta-{}characters. It also allows to check whether the input string is before or after a given test string.

\subsubsection{Attributes}
\label{_attributes_9}\hyperlabel{_attributes_9}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{llll}\hline
\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
Attribute
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
Type
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
Default
%
}&\multicolumn{1}{p{58\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
\texttt{v\-a\-l\-u\-e}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
""
%
}&\multicolumn{1}{p{58\newtblstarfactor}|}{\raggedright%
The string value that needs to be matched against.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
\texttt{v\-a\-r}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
-{}
%
}&\multicolumn{1}{p{58\newtblstarfactor}|}{\raggedright%
Save details of this match as \texttt{m\-a\-t\-c\-h\-i\-n\-g o\-b\-j\-e\-c\-t}.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
\texttt{n\-o\-t}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
boolean
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
false
%
}&\multicolumn{1}{p{58\newtblstarfactor}|}{\raggedright%
Whether to invert the test result or not.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
\texttt{f\-i\-n\-d}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
boolean
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
false
%
}&\multicolumn{1}{p{58\newtblstarfactor}|}{\raggedright%
Whether to match the input value partially (true) or as a whole (false)
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
\texttt{d\-e\-b\-u\-g}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
boolean
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
false
%
}&\multicolumn{1}{p{58\newtblstarfactor}|}{\raggedright%
Whether to turn on extra debug information
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
\texttt{l\-i\-t\-e\-r\-a\-l\-l\-y}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
boolean
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
false
%
}&\multicolumn{1}{p{58\newtblstarfactor}|}{\raggedright%
Whether to take an invalid expression literally or not.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
\texttt{i\-g\-n\-o\-r\-e\-c\-a\-s\-e}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
boolean
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
false
%
}&\multicolumn{1}{p{58\newtblstarfactor}|}{\raggedright%
Whether to enable case-{}insensitive matching.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
\texttt{c\-o\-m\-m\-e\-n\-t\-s}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
boolean
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
false
%
}&\multicolumn{1}{p{58\newtblstarfactor}|}{\raggedright%
Whether to allow whitespace and comments in an \emph{regex}.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
\texttt{d\-o\-t\-a\-l\-l}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
boolean
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
false
%
}&\multicolumn{1}{p{58\newtblstarfactor}|}{\raggedright%
Whether literal \texttt{.} matches \emph{any} character.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
\texttt{u\-n\-i\-x\-l\-i\-n\-e\-s}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
boolean
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
false
%
}&\multicolumn{1}{p{58\newtblstarfactor}|}{\raggedright%
Whether \emph{only} \texttt{n\-l} is accepted as line terminator
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
\texttt{m\-u\-l\-t\-i\-l\-i\-n\-e}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
boolean
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
false
%
}&\multicolumn{1}{p{58\newtblstarfactor}|}{\raggedright%
Whether \texttt{\^{}} and \texttt{\$} shall \emph{only} match begin and end of input
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
\emph{re}.\texttt{e\-x\-p\-r}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
%
}&\multicolumn{1}{p{58\newtblstarfactor}|}{\raggedright%
Element \texttt{m\-a\-t\-c\-h\-e\-s}: Specify a matching pattern as regular expression.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
\emph{glob}.\texttt{e\-x\-p\-r}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
%
}&\multicolumn{1}{p{58\newtblstarfactor}|}{\raggedright%
Element \texttt{m\-a\-t\-c\-h\-e\-s}: Specify a matching pattern as glob expression
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
\emph{cmp}.\texttt{l\-t}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
-{}
%
}&\multicolumn{1}{p{58\newtblstarfactor}|}{\raggedright%
\texttt{<{}\-c\-m\-p\-/\->{}}: Specify a matching pattern as glob expression
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
\emph{cmp}.\texttt{e\-q}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
-{}
%
}&\multicolumn{1}{p{58\newtblstarfactor}|}{\raggedright%
\texttt{<{}\-c\-m\-p\-/\->{}}: Specify a matching pattern as glob expression
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
\emph{cmp}.\texttt{g\-t}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
-{}
%
}&\multicolumn{1}{p{58\newtblstarfactor}|}{\raggedright%
\texttt{<{}\-c\-m\-p\-/\->{}}: Specify a matching pattern as glob expression
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

Attribute \textbf{value} defines the test (string) value. EL \hyperlink{el}{EL} references can be used. Leading and trailing whitespace is always removed. A test of a clause will always evaluate to \texttt{f\-a\-l\-s\-e} if this attribute is not set. It is legal however to have a switch without this attribute.

The default settings of attributes \textbf{var}, .., \textbf{debug} have been shown in table above. A default setting can be changed by using the attribute on switch element level. Those default settings are inherited by each clause-{}element -{} \texttt{<{}\-r\-e\-/\->{}}, \texttt{<{}\-g\-l\-o\-b\-/\->{}} or \texttt{<{}\-c\-m\-p\-/\->{}}. Each attribute \textbf{var},.., \textbf{debug} can be applied on clause-{}elements where they override their inherited setting:

\begin{lstlisting}[firstnumber=1,]
 <c:switch .. not="true">
  ..
  <cmp eq="foo" lt="foo" not="false">
    <!-- still less then "foo" or equal "foo" -->
  </cmp>
 </c:switch>\end{lstlisting}

Use attribute \textbf{var} to specify the name of an EL variable to hold match details like the number of capturing groups, the value of the first capturing group and the like. See \hyperlink{el_matcher_properties}{matcher properties} for a list of available properties; see also below for examples. The attribute value may contain EL references.

Attribute \textbf{not} can be used to invert the result of a test match.

\begin{lstlisting}[firstnumber=1,]
 <c:switch ..>
  <cmp eq="foo" lt="foo" not="true">
    <!-- greater then "foo"  -->
  </cmp>
 </c:switch>\end{lstlisting}

When applying a regular or glob expression on a test value, then by default, the expression must describe the whole test value for a successful match. Attribute \textbf{find} can be used to change this behaviour. Set to \texttt{t\-r\-u\-e}, then a successful match is given if the expression describes a part of the input string:

\begin{lstlisting}[firstnumber=1,]
 <c:switch value="foobar">
  <glob find="true" expr="foo">
    <!-- matches foobar -->
  </glob>
 </c:switch>\end{lstlisting}

Attribute \textbf{find} does not apply on clause \texttt{c\-m\-p}.

Use attribute \textbf{debug} to enable extra output of debug information on your attached standard error stream, bypassing Ant's logging mechanics.

The semantics of attribute \textbf{literally} varies depending on it's context. A build failure is thrown if an illegal regular expression pattern -{} like \texttt{*} -{} is seen. If literally is enabled, the regular expression string is taken literally instead, no exception is thrown while a warning message is reported. If attribute \textbf{literally} is enabled in context of a glob expression, then any meta characters are taken as regular characters. Attribute \textbf{literally} has no meaning in the context of clause \texttt{c\-m\-p}.

The remaining part of this section describes attributes \textbf{ignorecase}, .., \textbf{multiline}. This attributes can be used to change the characteristics of the underlying regular expression engine. Modern regular expression engines also allow to their characteristics on the fly by using embedded flags. Embedded flag alternatives are also listed.

Attribute \textbf{ignorecase} can be used to enable case-{}insensitive matching. This attribute also applies to clause \texttt{c\-m\-p}. Case-{}insensitive matching is enabled on the US-{}ASCII charset only. Unicode-{}aware matching can not be enabled. The embedded flag expression equivalent flag of this attribute is \texttt{(\-?\-i\-)}.

Use attribute \textbf{comment} to enrich regular expressions by comments. When set, whitespace is ignored and embedded comments starting with \# are ignored until the end of a line. Comments mode can also be enabled via the embedded flag expression \texttt{(\-?\-x\-)}.

Attribute \textbf{dotall} can be used to change the characteristics of meta-{}character \texttt{.}, the dot. By default all characters but line terminators are matched by this meta-{}character. When set, all characters are matched. The embedded equivalent is \texttt{(\-?\-s\-)} .

Use attribute \textbf{unixlines} to let the regular expression engine accept \texttt{\textbackslash{}\-n} as line termination character. The embedded flag expression is \texttt{(\-?\-d\-)}.

Attribute \textbf{multiline} changes the characteristics of meta-{}character \texttt{\^{}} and \texttt{\$}. By default they match at the beginning and the end of the entire input sequence. When set, they match just after and just before a line termination character. Multiline mode can also be enabled via the embedded flag expression (?m).

\subsubsection{Elements}
\label{_elements_9}\hyperlabel{_elements_9}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{lll}\hline
\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
Element
%
}&\multicolumn{1}{p{35\newtblstarfactor}|}{\raggedright%
Cardinality
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{r\-e}
%
}&\multicolumn{1}{p{35\newtblstarfactor}|}{\raggedright%
arbitrary
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
Regular expression based test clause.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{g\-l\-o\-b}
%
}&\multicolumn{1}{p{35\newtblstarfactor}|}{\raggedright%
arbitrary
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
Glob expression based test clause.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{c\-m\-p}
%
}&\multicolumn{1}{p{35\newtblstarfactor}|}{\raggedright%
arbitrary
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
Clause for basic equality and ordering.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{o\-t\-h\-e\-r\-w\-i\-s\-e}
%
}&\multicolumn{1}{p{35\newtblstarfactor}|}{\raggedright%
arbitrary
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
Task container, executed if all tests failed.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{m\-a\-t\-c\-h\-e\-s}
%
}&\multicolumn{1}{p{35\newtblstarfactor}|}{\raggedright%
arbitrary
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
Legacy test clause (deprecated).
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

Element \textbf{re} is a task container. Embedded tasks are conditionally carried out. The condition is satisfied if the regular expression expressed in attribute \textbf{expr} matches the given input value \emph{switch}.\texttt{v\-a\-l\-u\-e}. If attribute \textbf{expr} is not used, then the condition is satisfied. Use attribute \textbf{not} to negate the condition. Be aware of the following pathological case:

\begin{lstlisting}[firstnumber=1,]
 <c:switch value=..>
  <re>
    <!-- always carried out -->
  </re>
 <c:case>\end{lstlisting}

Element \textbf{glob} is a task container similar to element \textbf{re}. The only difference is, that attribute \textbf{expr} is interpreted as glob expression instead of a regular expression as in \textbf{re}.

Element \textbf{cmp} is a task container similar to element \textbf{re} and \textbf{glob}. This element supports attributes \textbf{lt}, \textbf{eq} and \textbf{gt} in addition to inherited attributes. Embedded tasks are carried out if each comparison in each used attribute evaluates to true. If none of the attributes is used, then the condition is also satisfied.

Element \textbf{otherwise} does not express a test clause and does not support any attributes. This element is a task container. Embedded tasks are carried out if attribute \emph{switch}.\texttt{v\-a\-l\-u\-e} has been set and if none of the test-{}clauses matched. This element can be present more than once. Elements are carried out in syntactical order.

Element \textbf{default} is an alias name for element \texttt{o\-t\-h\-e\-r\-w\-i\-s\-e}.

\subsubsection{Behaviour}
\label{_behaviour_8}\hyperlabel{_behaviour_8}%

String attribute \texttt{v\-a\-l\-u\-e} is applied against a series of \emph{case}-{}clauses in their syntactical order. Elements \texttt{r\-e}, \texttt{g\-l\-o\-b}, \texttt{c\-m\-p} and \texttt{m\-a\-t\-c\-h\-e\-s} are \emph{case}-{}clauses. If a clause matches, then tasks associated with the matching clause are carried out and no further clauses are will be tested. If no case-{}clause matches, then all optional available \texttt{o\-t\-h\-e\-r\-w\-i\-s\-e} elements are carried out in their syntactical order.

\subsubsection{Examples}
\label{_examples_3}\hyperlabel{_examples_3}%

Tests based on regular expressions

\begin{lstlisting}[firstnumber=1,]
<c:switch value="foobar">
   <re expr="^foobar$" />     ; matches
   <re expr="foobar" />       ; matches
   <re expr="foo" />          ; no
   <re expr="foo" find="true" ; matches
   <re expr="#{'foobar'}"     ; matches
</c:switch>\end{lstlisting}

The following example shows how to utilize matcher properties:

\begin{lstlisting}[firstnumber=1,]
<c:switch value="foobar">
   <re expr="^(.*)(b.*)$" var="m">
     <echo>
       #{ m          }   ; 'foobar'
       #{ m[0]       }   ; 'foobar'
       #{ m.start    }   ; 0
       #{ m.end      }   ; 5
       #{ m.groups   }   ; 2
       #{ m.pattern  }   ; '^(.*)(b.*)$'
       #{ m[1]       }   ; 'foo'
       #{ m[2]       }   ; 'bar'
       #{ m[1].end   }   ; 2
       #{ m[2].start }   ; 3
     <echo>
   </re>
</c:switch>\end{lstlisting}

Tests using glob expressions

\begin{lstlisting}[firstnumber=1,]
<c:switch value="foobar">
   <glob expr="foobar" />          ; matches
   <glob expr="f*r" />             ; matches
   <glob expr="foo" />             ; no
   <glob expr="foo" find="true" /> ; matches
   <glob expr="#{'foobar'}" />     ; matches
</c:switch>\end{lstlisting}

Matcher properties can also be used when using glob expressions. However, since glob expressions do not have enough semantics to express capturing groups, their use is limited. Consider:

\begin{lstlisting}[firstnumber=1,]
<c:switch value="foobar">
   <glob expr="f*r" var="m">
     <echo>
       #{ m          }   ; 'foobar'
       #{ m[0]       }   ; 'foobar'
       #{ m.start    }   ; 0
       #{ m.end      }   ; 5
       #{ m.groups   }   ; 0
       #{ m.pattern  }   ; 'f.*b'
       #{ m[1]       }   ; ''
     <echo>
   </glob>
</c:switch>\end{lstlisting}

Finally use element \texttt{c\-m\-p} to do text based comparison in absence of any meta characters. Since element \texttt{c\-m\-p} is not based on an regular expression engine, matcher properties are not available. Consider

\begin{lstlisting}[firstnumber=1,]
<c:switch value="foobar">
   <cmp eq="foobar" />           ; matches
   <cmp eq="f*r"    />           ; no
   <cmp eq="foo" find="true"/>   ; no
</c:switch>\end{lstlisting}

Element \texttt{c\-m\-p} can be used to sort text in alphabetical order. Consider:

\begin{lstlisting}[firstnumber=1,]
<c:switch value="b">
   <cmp eq="b" />           ; true
   <cmp lt="c" />           ; true
   <cmp gt="a" />           ; true
   <cmp lt="a" eq="b" />    ; true
</c:switch>\end{lstlisting}

\subsubsection{Pathological}
\label{_pathological}\hyperlabel{_pathological}%

Switch has been designed to be rather tolerant. No elements are required in which case of course nothing happens.

\begin{lstlisting}[firstnumber=1,]
<c:switch />
<c:switch value="foobar" />\end{lstlisting}

An \texttt{o\-t\-h\-e\-r\-w\-i\-s\-e} elements is carried out if not \emph{case}-{}clause matches, especially in the case of absent \emph{case}-{}clauses:

\begin{lstlisting}[firstnumber=1,]
<c:switch>
 <otherwise>
  <echo>executed, cause nothing matched.</echo>
 </otherwise>
</c:switch>\end{lstlisting}

\section{Repetative Tasks}
\label{part7}\hyperlabel{part7}%

Flaka has a looping statement. Use task \hyperlink{task_for}{for} to iterate over a \emph{list} of items. Use \hyperlink{task_break}{break} and \hyperlink{task_continue}{continue} to terminate the loop or to continue the loop with the next item.

\begin{lstlisting}[firstnumber=1,]
 <c:for var=" name " in=" ''.tofile.list ">
    ; sequence of task or macros
    ; used <c:continue /> to continue ; and
    ; <c:break /> to stop looping
    ; use #{name} to refer to current item (as shown below)
    <c:echo>#{name}</c:echo>
 </c:for>\end{lstlisting}

Attribute \texttt{i\-n} will be evaluated as \hyperlink{el}{EL} expression. In the example above, that \hyperlink{el}{EL} expression is \texttt{'\-'\-.\-t\-o\-f\-i\-l\-e\-.\-l\-i\-s\-t} which, when evaluated, creates a list of all files in the folder containing the current build script. To understand the expression, have a look at \hyperlink{el_string_properties}{properties} of a string and \hyperlink{el_file_properties}{properties} of a file.

\subsection{while}
\label{task_while}\hyperlabel{task_while}%

A task implemening a \texttt{w\-h\-i\-l\-e} loop:

\begin{lstlisting}[firstnumber=1,]
<c:let>
  i = 3
</c:let>
<c:while test=" countdown >= 0 ">
  <c:echo>#{countdown > 0 ? countdown : 'bang!' }</c:echo>
<c:while>\end{lstlisting}

\subsubsection{Attributes}
\label{_attributes_10}\hyperlabel{_attributes_10}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{lllll}\hline
\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
Attribute
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
Type
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
Default
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
EL
%
}&\multicolumn{1}{p{52\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\cline{5-5}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{t\-e\-s\-t}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
\texttt{f\-a\-l\-s\-e}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
expr
%
}&\multicolumn{1}{p{52\newtblstarfactor}|}{\raggedright%
The condition for looping as \hyperlink{el}{EL} expression
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsubsection{Elements}
\label{_elements_10}\hyperlabel{_elements_10}%

\begin{verbatim}The body of this task may contain an arbitrary number of tasks or macros.\end{verbatim}

\subsubsection{Behaviour}
\label{_behaviour_9}\hyperlabel{_behaviour_9}%

All tasks listed as elements are executed as long as the \hyperlink{el}{EL} expression evaluates to \texttt{t\-r\-u\-e}.

\subsection{for}
\label{task_for}\hyperlabel{task_for}%

A task that implements a loop statement. Iterating over a list of \emph{objects}:

\begin{lstlisting}[firstnumber=1,]
 <c:for var="x" in=" list('a', 2, 'src'.tofile, typeof(list())) ">
   <c:echo>
      #{x}
   </c:echo>
 </c:for>\end{lstlisting}

\subsubsection{Attributes}
\label{_attributes_11}\hyperlabel{_attributes_11}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{lllll}\hline
\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
Attribute
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
Type
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
Default
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
EL
%
}&\multicolumn{1}{p{52\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\cline{5-5}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{v\-a\-r}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
\#\{\}
%
}&\multicolumn{1}{p{52\newtblstarfactor}|}{\raggedright%
The variable holding each loop item. This variable can be referenced within the body like \texttt{\#\-\{\-v\-a\-r\-\}} where \texttt{v\-a\-r} is the string used in this attribute. If not used, then no iteration takes place and no warning is issued. Notice that you can use \texttt{\#\-\{\-.\-.\-\}} only in \hyperlink{el}{EL} enabled tasks.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\cline{5-5}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{i\-n}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
expr
%
}&\multicolumn{1}{p{52\newtblstarfactor}|}{\raggedright%
The items to be iterated over as \hyperlink{el}{EL} expression. A iteration takes place except if \texttt{n\-u\-l\-l} is the evaluation result. Otherwise, if the evaluation result is \emph{not iterable object}, a temporary list containg that object is created on the fly. Iteration takes then place over that list and otherwise over the iterable collection.
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsubsection{Elements}
\label{_elements_11}\hyperlabel{_elements_11}%

\begin{verbatim}The body of this task may contain an arbitrary number of tasks or macros.\end{verbatim}

\subsubsection{Behaviour}
\label{_behaviour_10}\hyperlabel{_behaviour_10}%

This is the shortest possible for statement. It's legal albeit completely useless.

\begin{lstlisting}[firstnumber=1,]
 <c:for />\end{lstlisting}

\subsection{break}
\label{task_break}\hyperlabel{task_break}%

A task mirroring a break statement. When used within a \hyperlink{tasks_for}{for}-{}loop, the loop will be terminated. If this task is used outside of a \hyperlink{tasks_for}{for}-{}loop, a build exception will be thrown.

\begin{lstlisting}[firstnumber=1,]
  <c:for var="i" in=" list(1,2,3,4,5,6) ">
    <c:echo>i = #{i}</echo>
     <c:when test=" i == 3 ">
       <c:break />
     </c:when>
  </c:for>\end{lstlisting}

Being executed, the following will be dumped on stdout:

\begin{lstlisting}[firstnumber=1,]
[c:echo] i = 1
[c:echo] i = 2
[c:echo] i = 3\end{lstlisting}

\subsubsection{Attributes}
\label{_attributes_12}\hyperlabel{_attributes_12}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{lllll}\hline
\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
Attribute
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
Type
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
Default
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
\hyperlink{el}{EL}
%
}&\multicolumn{1}{p{52\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\cline{5-5}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{t\-e\-s\-t}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
-{}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
expr
%
}&\multicolumn{1}{p{52\newtblstarfactor}|}{\raggedright%
Terminate loop when \hyperlink{el}{EL} expression evaluates to \texttt{t\-r\-u\-e}
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\cline{5-5}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{i\-f}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
-{}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
\#\{\}
%
}&\multicolumn{1}{p{52\newtblstarfactor}|}{\raggedright%
Terminate if property exists
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\cline{5-5}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{u\-n\-l\-e\-s\-s}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
-{}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
\#\{\}
%
}&\multicolumn{1}{p{52\newtblstarfactor}|}{\raggedright%
Terminate if property does not exist
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsubsection{Behaviour}
\label{_behaviour_11}\hyperlabel{_behaviour_11}%

When used without any attributes, the surrounding \hyperlink{tasks_for}{for} or \hyperlink{tasks_while}{while} loop will terminate at once. When used with attributes, then the loop will terminate if at least one attribute evaluates to \texttt{t\-r\-u\-e}. Otherwise, the loop will not be terminated and continues as usual.

The example given above can thus be shortened to

\begin{lstlisting}[firstnumber=1,]
  <c:for var="i" in=" list(1,2,3,4,5,6) ">
    <c:echo>i = #{i}</echo>
    <c:break test=" i == 3 " />
  </c:for>\end{lstlisting}

\subsection{continue}
\label{task_continue}\hyperlabel{task_continue}%

A task mirroring a continue statement. When used within a \hyperlink{tasks_for}{for}-{}loop, the loop will be continued with the next loop item (i.e. any statements after task continue are ignored). If this task is used outside of a for-{}loop, a build exception will be thrown.

\begin{lstlisting}[firstnumber=1,]
 <c:for var="i" in=" list(1,2,3,4,5,6) ">
   <c:when test=" i > 3 ">
     <c:continue />
   </c:when>
   <c:echo>i = #{i}</echo>
  </c:for>\end{lstlisting}

This would print:

\begin{lstlisting}[firstnumber=1,]
[c:echo] i = 1
[c:echo] i = 2
[c:echo] i = 3\end{lstlisting}

\subsubsection{Attributes}
\label{_attributes_13}\hyperlabel{_attributes_13}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{lllll}\hline
\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
Attribute
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
Type
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
Default
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
\hyperlink{el}{EL}
%
}&\multicolumn{1}{p{52\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\cline{5-5}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{t\-e\-s\-t}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
-{}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
expr
%
}&\multicolumn{1}{p{52\newtblstarfactor}|}{\raggedright%
Continue loop when \hyperlink{el}{EL} expression evaluates to \texttt{t\-r\-u\-e}
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\cline{5-5}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{i\-f}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
-{}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
\#\{\}
%
}&\multicolumn{1}{p{52\newtblstarfactor}|}{\raggedright%
Continue if property exists
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\cline{5-5}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{u\-n\-l\-e\-s\-s}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
-{}
%
}&\multicolumn{1}{p{11\newtblstarfactor}|}{\raggedright%
\#\{\}
%
}&\multicolumn{1}{p{52\newtblstarfactor}|}{\raggedright%
Continue if property does not exist
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsubsection{Behaviour}
\label{_behaviour_12}\hyperlabel{_behaviour_12}%

When used without any attributes, the surrounding \hyperlink{tasks_for}{for} or \hyperlink{tasks_while}{while} be continued while following tasks or macros are ignored in the current iteration step. When used with attributes, then the loop will be continued if at least one attribute evaluates to \texttt{t\-r\-u\-e}. Otherwise, the subsequent tasks or macros are executed.

The example given above can thus be shortened to

\begin{lstlisting}[firstnumber=1,]
 <c:for var="i" in=" list(1,2,3,4,5,6) ">
   <c:continue test=" i > 3 " />
   <c:echo>i = #{i}</echo>
</c:for>\end{lstlisting}

\section{Exceptional Tasks}
\label{part8}\hyperlabel{part8}%

Flaka has been charged with exception handling tasks.

\subsection{trycatch}
\label{task_trycatch}\hyperlabel{task_trycatch}%

A task mirroring try-{}catch exception handling found in modern programming languages. The following snippet demonstrates the usage of trycatch:

\begin{lstlisting}[firstnumber=1,]
 <c:trycatch property="reason">
   <try>
     <echo>one ..</echo>
     <echo>two ..</echo>
     <fail message="bang" />
     <echo>three ..</echo>
   </try>
   <catch>
     <echo>..caught : ${reason}</echo>
   </catch>
   <else>
     <echo>nothing exceptionell</echo>
   </else>
   <finally>
     <echo>..finally</echo>
   </finally>
 </c:trycatch>\end{lstlisting}

When executed, the following will be reported by Ant:

\begin{lstlisting}[firstnumber=1,]
[echo] one ..
[echo] two ..
[echo] ..caught : bang
[echo] ..finally\end{lstlisting}

\subsubsection{Attributes}
\label{_attributes_14}\hyperlabel{_attributes_14}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{llll}\hline
\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
Attribute
%
}&\multicolumn{1}{p{10\newtblstarfactor}|}{\raggedright%
Type
%
}&\multicolumn{1}{p{25\newtblstarfactor}|}{\raggedright%
Default
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{p\-r\-o\-p\-e\-r\-t\-y}
%
}&\multicolumn{1}{p{10\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{25\newtblstarfactor}|}{\raggedright%
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
Property that should hold the exception message
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{r\-e\-f\-e\-r\-e\-n\-c\-e}
%
}&\multicolumn{1}{p{10\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{25\newtblstarfactor}|}{\raggedright%
\texttt{t\-r\-y\-c\-a\-t\-c\-h\-.\-o\-b\-j\-e\-c\-t}
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
Reference to hold the exception object
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\emph{catch}.\texttt{t\-y\-p\-e}
%
}&\multicolumn{1}{p{10\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{25\newtblstarfactor}|}{\raggedright%
\texttt{*\-.\-B\-u\-i\-l\-d\-E\-x\-c\-e\-p\-t\-i\-o\-n}
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
A glob pattern to match the exception's type
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\emph{catch}.\texttt{m\-a\-t\-c\-h}
%
}&\multicolumn{1}{p{10\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{25\newtblstarfactor}|}{\raggedright%
\texttt{*}
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
A glob pattern to match the exception's message
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsubsection{Elements}
\label{_elements_12}\hyperlabel{_elements_12}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{ll}\hline
\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
Element
%
}&\multicolumn{1}{p{85\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
try
%
}&\multicolumn{1}{p{85\newtblstarfactor}|}{\raggedright%
A task container to hold tasks and macros to be given a try
%
}\tabularnewline
\cline{1-1}\cline{2-2}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
catch
%
}&\multicolumn{1}{p{85\newtblstarfactor}|}{\raggedright%
A task container to be executed if an exception gets thrown
%
}\tabularnewline
\cline{1-1}\cline{2-2}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
else
%
}&\multicolumn{1}{p{85\newtblstarfactor}|}{\raggedright%
Task container executed if no exception is thrown in the \texttt{t\-r\-y} element
%
}\tabularnewline
\cline{1-1}\cline{2-2}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
finally
%
}&\multicolumn{1}{p{85\newtblstarfactor}|}{\raggedright%
A task container to be executed in any case
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

All elements are optional. There can be an arbitrary number of catch-{}clauses.

\subsubsection{Behaviour}
\label{_behaviour_13}\hyperlabel{_behaviour_13}%

If a try-{}clause exists, then tasks within that clause are executed. If an exception is thrown by one of them, then ..
\begin{itemize}

\item{} If a property name is given, then that property will hold the message of the exception thrown.



\item{} If a reference name is given, then that reference will hold the exception object thrown.



\item{} All catch-{}clauses are tried in syntactical order whether a clause matches.



\item{} If there is a \emph{matching} catch clause, then all tasks in that matching clause are executed and all further catch-{}clauses are ignored.


\end{itemize}

If no exception is thrown within the try-{}clause, then an optional else-{}clause will be executed.

An optional finally-{}clause is always executed, regardless of whether an exception gets thrown in a try-{}, else-{} or within a catch-{}clause. A finally-{}clause is especially executed in the absence of a try-{}clause.

An exception thrown in a try-{}clause for which a matching catch-{}clause exists, is assumed to be handled by the matching clause and therefore not propagated. An exception for which no matching clause exists, an exception thrown in an else-{}clause or in a matching catch-{}clause is propagated to an optional existing finally-{}clause. If no finally-{}clause exists, then the incoming exception will be propagated to the caller. The finally-{}clause propagates it's incoming exception to the caller.

An exception thrown in a catch-{}clause, in an else-{}clause or in a finally-{}clause overrides any previously existing exception when propagating. However, an exception thrown in a catch-{}, else-{} or finally-{}clause will neither update nor assign the property or reference.

A catch-{}clause can be decorated with a \emph{type} or \emph{match} argument to handle a specific exception class. Both arguments expect a glob expression. A catch-{}clauses matches if both, the type-{}argument and the match-{}argument do match. The type-{}argument is matched against exception's native type name. The match-{}argument is matched against the exception's message. Both default values ensure that a build exception thrown by Ant is caught while an implementation dependent exception passes. Consider:

\begin{lstlisting}[firstnumber=1,]
<c:trycatch>
   <try>
      <fail message="houston, we have a problem" />
   </try>
   <catch match="*houston*">
     ; handle exceptions where the exception's message
     ; contains the word 'houston'
   </catch>
   <catch type="java.lang.*">
     ; handle Java runtime exceptions
   </catch>
   <catch>
     ; handle standard build exceptions
   </catch>
</c:trycatch>\end{lstlisting}

When matching against the error message, be aware that the actual error message might be slightly different from the actual message given cause usually the error message contains also information about where the exception got thrown. It is therefore wise to accept any leading and trailing space.

\subsection{throw}
\label{task_throw}\hyperlabel{task_throw}%

A task to re-{}throw a previously thrown exception.

\begin{lstlisting}[firstnumber=1,]
<c:trycatch>
  <try>
     <fail message="houston,.."/>
  </try>
  <catch>
    <echo level="DEBUG">*** exception seen ***</echo>
    <c:throw />
  </c:catch>
</c:trycatch>\end{lstlisting}

\subsubsection{Attributes}
\label{_attributes_15}\hyperlabel{_attributes_15}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{llll}\hline
\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
Attribute
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
Type
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
Default
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{r\-e\-f\-e\-r\-e\-n\-c\-e}
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
\texttt{t\-r\-y\-c\-a\-t\-c\-h\-.\-o\-b\-j\-e\-c\-t}
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
The name of the reference holding the previously thrown exception
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{v\-a\-r}
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
\texttt{t\-r\-y\-c\-a\-t\-c\-h\-.\-o\-b\-j\-e\-c\-t}
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
An alias for attribute \texttt{r\-e\-f\-e\-r\-e\-n\-c\-e}
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsubsection{Behaviour}
\label{_behaviour_14}\hyperlabel{_behaviour_14}%

When this task is executed, it looks-{}up whether the current project contains a specific reference. By default, the name of that reference is \texttt{t\-r\-y\-c\-a\-t\-c\-h\-.\-o\-b\-j\-e\-c\-t}. The name of this reference can be changed  by using attribute \texttt{r\-e\-f\-e\-r\-e\-n\-c\-e}. If that reference exists and an exception is attached with that reference, then that exception is thrown. Otherwise, a standard build exception is generated and thrown. In that case, \texttt{t\-h\-r\-o\-w} acts like Ant's standard task \texttt{f\-a\-i\-l}.

Note that \texttt{t\-h\-r\-o\-w} works in any context. Consider

\begin{lstlisting}[firstnumber=1,]
<c:trycatch>
 <try>
   <fail message="houston,.." />
 </try>
 ; ignores build exception
 <catch />
</c:trycatch>
..
; very much later
..
; throws build exception 'houston,..'
<c:throw />\end{lstlisting}

\subsection{fail}
\label{task_fail}\hyperlabel{task_fail}%

This task has been derived from Ant's core task \texttt{f\-a\-i\-l} \footnote{
see \href{http://ant.apache.org/manual/CoreTasks/fail.htm}{http://ant.apache.org/\-manual/\-CoreTasks/\-fail.htm}
}. In addition, EL-{}references can be used regardless whether \hyperlink{el}{EL} has been enabled or not. Furthermore, attribute \texttt{t\-e\-s\-t} has been added. The value of \texttt{t\-e\-s\-t} will be evaluated as EL expression in a boolean context. Thus it is possible to throw a build exception not only based on whether a property exists or not but also whether an EL-{}expression is evaluated as \texttt{t\-r\-u\-e}.

\begin{lstlisting}[firstnumber=1,]
<c:fail message="negative number #{ i } seen" test=" i lt 0 " />\end{lstlisting}

\subsubsection{Attributes}
\label{_attributes_16}\hyperlabel{_attributes_16}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{lll}\hline
\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
Attribute
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
Type
%
}&\multicolumn{1}{p{70\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{t\-e\-s\-t}
%
}&\multicolumn{1}{p{15\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{70\newtblstarfactor}|}{\raggedright%
An arbitrary EL-{}expression.
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\section{Other Tasks}
\label{part9}\hyperlabel{part9}%

\subsection{install-{}property-{}handler}
\label{task_install_property_handler}\hyperlabel{task_install_property_handler}%

A task to install Flaka's property handler. When installed, Ant \emph{understands} \hyperlink{el}{EL} references like \texttt{\#\-\{\-.\-.\-\}} in addition to standard property references \texttt{\$\-\{\-.\-.\-\}}. Consider:

\begin{lstlisting}[firstnumber=1,]
 <echo>
    #{3 * 4}
 </echo>
 <c:install-property-handler />
 <echo>
    #{3 * 4}
 </echo>\end{lstlisting}

This is the output of above's snippet:

\begin{lstlisting}[firstnumber=1,]
 [echo] [1] #{3 * 4}
 [echo] [2] 12\end{lstlisting}

\subsubsection{Attributes}
\label{_attributes_17}\hyperlabel{_attributes_17}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{lllll}\hline
\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
Attributes
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
Type
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
Default
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
EL
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\cline{4-4}\cline{5-5}\multicolumn{1}{|p{20\newtblstarfactor}|}{\raggedright%
type
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
string
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
\texttt{e\-l\-o\-n\-l\-y}
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
\#\{\}
%
}&\multicolumn{1}{p{20\newtblstarfactor}|}{\raggedright%
Install handler with certain additional features  enabled (see below)
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsubsection{Behaviour}
\label{_behaviour_15}\hyperlabel{_behaviour_15}%

If \texttt{t\-y\-p\-e} is \texttt{e\-l\-o\-n\-l\-y} (exactly as written), then the new handler will only handle \texttt{\#\-\{\-.\-.\-\}} in addition. If \texttt{t\-y\-p\-e} is \texttt{r\-e\-m\-o\-v\-e}, then unresolved property references are discarded.

\subsection{rescue}
\label{task_rescue}\hyperlabel{task_rescue}%

Task \texttt{r\-e\-s\-c\-u\-e} is essentially a container for an arbitrary number of tasks. In addition, it allows to rescue variables and properties.

\begin{lstlisting}[firstnumber=1,]
<c:rescue>
 <vars>
   foo
 </vars>
 <properties>
   bar
 </properties>
 task_1
   ..
 task_N
<c:rescue>\end{lstlisting}

No matter what will happen with property \texttt{v\-a\-r} and variable \texttt{f\-o\-o} within \texttt{s\-e\-q\-u\-e\-n\-t\-i\-a\-l}, this will be unoticable outside of \texttt{r\-e\-s\-c\-u\-e} cause the values (or better: state) will be restored after having executed all embedded tasks. This will of course also work in case an exception is thrown by one of the tasks.

\subsubsection{Attributes}
\label{_attributes_18}\hyperlabel{_attributes_18}%

This task does not define attributes.

\subsubsection{Elements}
\label{_elements_13}\hyperlabel{_elements_13}%

{\centering \savetablecounter \begingroup%
\setlength{\newtblsparewidth}{\linewidth-2\tabcolsep-2\tabcolsep-2\tabcolsep-2\tabcolsep}%
\setlength{\newtblstarfactor}{\newtblsparewidth / \real{100}}%

\begin{longtable}{lll}\hline
\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
Name
%
}&\multicolumn{1}{p{35\newtblstarfactor}|}{\raggedright%
Cardinality
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
Description
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{v\-a\-r\-s}
%
}&\multicolumn{1}{p{35\newtblstarfactor}|}{\raggedright%
0..1
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
Defines a \hyperlink{task_list}{list} of variable names. Attributes and behaviour is that of task \hyperlink{task_list}{list} except that interpretation of lines as \hyperlink{el}{EL} expressions are disabled.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\texttt{p\-r\-o\-p\-e\-r\-t\-i\-e\-s}
%
}&\multicolumn{1}{p{35\newtblstarfactor}|}{\raggedright%
0..1
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
Defines a \hyperlink{task_list}{list} of property names. Attributes and behaviour is that of task \hyperlink{task_list}{list} except that interpretation of lines as \hyperlink{el}{EL} expressions are disabled.
%
}\tabularnewline
\cline{1-1}\cline{2-2}\cline{3-3}\multicolumn{1}{|p{15\newtblstarfactor}|}{\raggedright%
\emph{task}
%
}&\multicolumn{1}{p{35\newtblstarfactor}|}{\raggedright%
arbitrary
%
}&\multicolumn{1}{p{50\newtblstarfactor}|}{\raggedright%
A (arbitrary) task or macro to be excecuted
%
}\tabularnewline
\hline
\end{longtable}\endgroup%
\restoretablecounter%
}

\subsubsection{Behaviour}
\label{_behaviour_16}\hyperlabel{_behaviour_16}%

Executes all embedded tasks. Variables and properties listed in \texttt{v\-a\-r\-s} and \texttt{p\-r\-o\-p\-e\-r\-t\-i\-e\-s} are restored to their previous state, i.e. if not existing before the execution, they will not exist afterwards. If existed, their value will be restored.

\section{Flaka Glossary}
\label{glossary}\hyperlabel{glossary}%

A compilation of words and their meaning in Flaka.

\subsection{Continuation Lines}
\label{glossary_continuation_lines}\hyperlabel{glossary_continuation_lines}%

A continuation line is a sequence of characters ending in \texttt{\textbackslash{}\-N\-L} and not in \texttt{\textbackslash{}\-\textbackslash{}\-N\-L} (where NL is the line ending characters \texttt{C\-R L\-F} or \texttt{L\-F}. Tasks supporting continuation lines will accumulate the content of such a line with the (accumulated) content of the following line. The continuation character and the line ending characters are not accumulated.

\begin{lstlisting}[firstnumber=1,]
a \
b\\
c\\end{lstlisting}

Defines two accumulated lines: (1) \texttt{a b\-\textbackslash{}} and (2) \texttt{c}.

\subsection{Property Reference}
\label{glossary_property_reference}\hyperlabel{glossary_property_reference}%

A reference to a \href{http://ant.apache.org/manual/using.html#properties}{property} is written as \texttt{\$\-\{\-.\-.\-\}}. Property references are handled by the Ant property handler. If not changed, then \texttt{\$\-\{\-x\-\}} will be replaced by the value of property \texttt{x} if such a property exists. Otherwise, the reference will be left as is.

\subsection{Expression Reference}
\label{glossary_expression_reference}\hyperlabel{glossary_expression_reference}%

A reference to an \hyperlink{el}{EL} expression is written as \texttt{\#\-\{\-.\-.\-\}}. \hyperlink{el}{EL} is not part of Ant and can thus only be handled by certain tasks. References may appear in attribute values or in text elements. Not all attributes can handled EL references and neither all text elements. If a attribute or text element can handle EL references, it is specifically mentioned.

\subsection{Base Folder}
\label{glossary_base_folder}\hyperlabel{glossary_base_folder}%

Relative files are usually meant to be relative to the current working directory. Not so in Ant, where a file is relative to the folder containing the build script of the current project. This folder is called the base directory or base folder. Ant defines property â€˜basedir\`{} to contain the (absolute) path name of this folder. When using \hyperlink{el}{EL} expressions you can use the empty string to create the base folder as file object, like in \`{} 'â€™.tofile \`{}.

See also \href{http://ant.apache.org/manual/using.html#built-in-props}{built-{}in-{}props} for a list of standard Ant properties.
%
% That's it folks!
%
\end{document}
